<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRD_Hybrid_Model_Consistency_v1.0</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
    color: #24292e;
    background-color: #fff;
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem;
}
h1, h2, h3, h4, h5, h6 {
    margin-top: 24px;
    margin-bottom: 16px;
    font-weight: 600;
    line-height: 1.25;
}
h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
h3 { font-size: 1.25em; }
code {
    padding: 0.2em 0.4em;
    margin: 0;
    font-size: 85%;
    background-color: #f6f8fa;
    border-radius: 6px;
    font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
}
pre {
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f6f8fa;
    border-radius: 6px;
}
pre code {
    display: inline;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: initial;
    border: 0;
}
blockquote {
    padding: 0 1em;
    color: #6a737d;
    border-left: 0.25em solid #dfe2e5;
    margin: 0;
}
table {
    display: block;
    width: 100%;
    margin-top: 0;
    margin-bottom: 16px;
    overflow: auto;
    border-spacing: 0;
    border-collapse: collapse;
}
table th, table td {
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}
table tr {
    background-color: #fff;
    border-top: 1px solid #c6cbd1;
}
table tr:nth-child(2n) {
    background-color: #f6f8fa;
}
a { color: #0366d6; text-decoration: none; }
a:hover { text-decoration: underline; }
hr {
    height: 0.25em;
    padding: 0;
    margin: 24px 0;
    background-color: #e1e4e8;
    border: 0;
}
</style>

</head>
<body>
<h1 id="prd-v10-hybrid-model-consistency-validation-specification">PRD v1.0: Hybrid Model Consistency Validation Specification</h1>
<h1 id="_1">æ··åˆæ¨¡å‹ä¸€è‡´æ€§é©—è­‰è¦ç¯„</h1>
<p><strong>æ–‡ä»¶ç‰ˆæœ¬:</strong> v1.0 (Golden Standard &amp; Copula Effect Handling)<br />
<strong>æ—¥æœŸ:</strong> 2026-02-13<br />
<strong>è² è²¬äºº:</strong> Oscar Chang<br />
<strong>ç›®æ¨™æ¨¡çµ„:</strong> <code>src/modeling/validation/hybrid_consistency.py</code>, <code>src/modeling/validation/consistency_checker.py</code><br />
<strong>ä¸Šæ¸¸å¥‘ç´„:</strong> <code>src/modeling/training_pipeline.py</code> (v1.2+, BatchTrainingCoordinator)<br />
<strong>ä¸‹æ¸¸å¥‘ç´„:</strong> <code>src/optimization/engine.py</code> (v1.1+, ModelRegistry)<br />
<strong>é—œéµç›¸ä¾:</strong> <code>src/modeling/artifacts.py</code> (MultiModelArtifact), <code>src/features/annotation_manager.py</code><br />
<strong>é ä¼°å·¥æ™‚:</strong> 3 ~ 4 å€‹å·¥ç¨‹å¤©</p>
<hr />
<h2 id="1">1. åŸ·è¡Œç¸½ç¶±èˆ‡è¨­è¨ˆå“²å­¸</h2>
<h3 id="11">1.1 æ ¸å¿ƒç›®æ¨™</h3>
<p>å»ºç«‹<strong>æ¨™æº–åŒ–ã€å¯é‡ç¾ã€é ˜åŸŸæ„ŸçŸ¥</strong>çš„Hybrid Modelä¸€è‡´æ€§é©—è­‰æ¡†æ¶ï¼Œè§£æ±ºä»¥ä¸‹é—œéµæ¨¡ç³Šåœ°å¸¶ï¼š</p>
<ol>
<li><strong>é»ƒé‡‘æ¨™æº–å®šç¾© (Golden Standard Definition)</strong>ï¼šæ˜ç¢ºå®šç¾©æ¯”è¼ƒçš„åŸºæº–è³‡æ–™é›†ï¼ˆé©—è­‰é›† vs æ¸¬è©¦é›†ï¼‰ã€æ¯”è¼ƒç¶­åº¦ï¼ˆé€ç­† vs æ•´é«”ï¼‰ã€ä»¥åŠçµ±è¨ˆæ–¹æ³•è«–</li>
<li><strong>å®¹å·®è¨ˆç®—æ¨™æº–åŒ– (Tolerance Calculation Standardization)</strong>ï¼šå»ºç«‹è€ƒæ…®HVACè¨­å‚™è€¦åˆæ•ˆæ‡‰ï¼ˆCopula Effectï¼‰çš„å‹•æ…‹å®¹å·®æ¨¡å‹ï¼Œè€Œéç¡¬æ€§å›ºå®š5%é–€æª»</li>
<li><strong>éƒ¨åˆ†ç¼ºå¤±è™•ç† (Partial Missing Handling)</strong>ï¼šå®šç¾©ç•¶Component Modelsåƒ…éƒ¨åˆ†å­˜åœ¨æ™‚ï¼ˆå¦‚åªæœ‰chiller_1_kwï¼Œç„¡chiller_2_kwï¼‰çš„åŠ ç¸½é‚è¼¯èˆ‡ç½®ä¿¡åº¦è©•ä¼°</li>
<li><strong>è€¦åˆæ•ˆæ‡‰è£œå„Ÿ (Copula Effect Compensation)</strong>ï¼šè­˜åˆ¥ä¸¦é‡åŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å°è‡´çš„ç³»çµ±æ€§åå·®ï¼ˆå¦‚å…±ç”¨ç®¡è·¯å£“åŠ›æå¤±ã€ç†±äº¤äº’ä½œç”¨ï¼‰ï¼Œé¿å…èª¤åˆ¤æ­£å¸¸ç‰©ç†ç¾è±¡ç‚ºæ¨¡å‹éŒ¯èª¤</li>
</ol>
<h3 id="12">1.2 è¨­è¨ˆåŸå‰‡</h3>
<ol>
<li>
<p><strong>åˆ†å±¤é©—è­‰ç­–ç•¥ (Hierarchical Validation)</strong>ï¼š<br />
   - <strong>L1ï¼šæ¨£æœ¬ç´šé©—è­‰ (Sample-Level)</strong>ï¼šå–®ç­†è³‡æ–™é»çš„çµ•å°èª¤å·®æª¢æŸ¥ï¼ˆç”¨æ–¼ç•°å¸¸æª¢æ¸¬ï¼‰<br />
   - <strong>L2ï¼šèšåˆç´šé©—è­‰ (Aggregate-Level)</strong>ï¼šåˆ†ç¾¤çµ±è¨ˆï¼ˆä¾è² è¼‰å€é–“ã€å¤–æ°£æ¢ä»¶ã€é‹è¡Œæ¨¡å¼åˆ†ç¾¤ï¼‰<br />
   - <strong>L3ï¼šè¶¨å‹¢ç´šé©—è­‰ (Trend-Level)</strong>ï¼šæ™‚é–“åºåˆ—ç›¸é—œæ€§èˆ‡æ®˜å·®åˆ†æï¼ˆç¢ºä¿å…©æ¨¡å‹è¶¨å‹¢ä¸€è‡´ï¼‰</p>
</li>
<li>
<p><strong>å‹•æ…‹å®¹å·®é–¾å€¼ (Dynamic Tolerance Threshold)</strong>ï¼š<br />
   - åŸºæ–¼<strong>ç³»çµ±è² è¼‰ç‡ (System Load Percentage)</strong> å‹•æ…‹èª¿æ•´å®¹å·®ï¼ˆä½è² è¼‰æ™‚å…è¨±è¼ƒé«˜ç›¸å°èª¤å·®ï¼‰<br />
   - åŸºæ–¼<strong>è¨­å‚™çµ„åˆè¤‡é›œåº¦ (Equipment Combination Complexity)</strong> èª¿æ•´ï¼ˆå¤šè¨­å‚™ä¸¦è¯æ™‚è€¦åˆæ•ˆæ‡‰å¢å¼·ï¼‰<br />
   - å€åˆ†<strong>çµ±è¨ˆèª¤å·® (Statistical Error)</strong> èˆ‡<strong>çµæ§‹æ€§åå·® (Structural Bias)</strong></p>
</li>
<li>
<p><strong>ç‰©ç†å¯è§£é‡‹æ€§ (Physical Interpretability)</strong>ï¼š<br />
   - æ‰€æœ‰ä¸€è‡´æ€§é•è¦å¿…é ˆæ¨™è¨˜<strong>ç‰©ç†åŸå› æ¨™ç±¤</strong>ï¼ˆå¦‚"ç®¡è·¯å£“æ"ã€"ç†±çŸ­è·¯"ã€"æ¸¬é‡èª¤å·®"ï¼‰<br />
   - æä¾›<strong>è€¦åˆæ•ˆæ‡‰ç†±å€åœ– (Copula Heatmap)</strong> è¦–è¦ºåŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å¼·åº¦</p>
</li>
<li>
<p><strong>å‘å¾Œç›¸å®¹æ€§ (Backward Compatibility)</strong>ï¼š<br />
   - èˆ‡Training v1.2çš„<code>BatchTrainingCoordinator._validate_hybrid_consistency()</code>ç„¡ç¸«æ•´åˆ<br />
   - èˆ‡Optimization v1.1çš„<code>ModelRegistry.validate_hybrid_consistency()</code>ä»‹é¢ä¸€è‡´<br />
   - æ”¯æ´æ—¢æœ‰çš„5%ç¡¬æ€§é–€æª»ä½œç‚ºä¿å®ˆ fallback é¸é …</p>
</li>
</ol>
<h3 id="13">1.3 é—œéµè¡“èªå®šç¾©</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">è¡“èª</th>
<th style="text-align: left;">å®šç¾©</th>
<th style="text-align: left;">æ•¸å­¸è¡¨é”</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>System Model ($S$)</strong></td>
<td style="text-align: left;">é æ¸¬ç³»çµ±ç¸½è€—é›»çš„æ¨¡å‹ï¼ˆé»‘ç›’ï¼‰</td>
<td style="text-align: left;">$\hat{y}_S = f_S(X)$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Component Models ($C_i$)</strong></td>
<td style="text-align: left;">é æ¸¬å€‹åˆ¥è¨­å‚™è€—é›»çš„æ¨¡å‹é›†åˆ</td>
<td style="text-align: left;">$\hat{y}<em>{C_i} = f</em>{C_i}(X_i)$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>åŠ ç¸½é æ¸¬ ($C_{sum}$)</strong></td>
<td style="text-align: left;">Component Models çš„ç®—è¡“å’Œ</td>
<td style="text-align: left;">$\hat{y}<em>{C</em>{sum}} = \sum_{i=1}^n \hat{y}_{C_i}$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è€¦åˆæå¤± ($\delta_{copula}$)</strong></td>
<td style="text-align: left;">è¨­å‚™é–“äº¤äº’ä½œç”¨å°è‡´çš„ç³»çµ±æ€§åå·®</td>
<td style="text-align: left;">$\delta_{copula} = \mathbb{E}[C_{sum} - S]$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é»ƒé‡‘è³‡æ–™é›† ($D_{golden}$)</strong></td>
<td style="text-align: left;">ç”¨æ–¼æ¯”è¼ƒçš„æ¬Šå¨è³‡æ–™é›†ï¼ˆå®šç¾©è¦‹2.1ç¯€ï¼‰</td>
<td style="text-align: left;">$D_{test}$ æˆ– $D_{val}$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>å‹•æ…‹å®¹å·® ($\tau$)</strong></td>
<td style="text-align: left;">ä¾é‹è¡Œæ¢ä»¶è®ŠåŒ–çš„èª¤å·®ä¸Šé™</td>
<td style="text-align: left;">$\tau = \tau_{base} \cdot \alpha_{load} \cdot \beta_{complexity}$</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-golden-standard-definition">2. é»ƒé‡‘æ¨™æº–å®šç¾© (Golden Standard Definition)</h2>
<h3 id="21">2.1 æ¯”è¼ƒè³‡æ–™é›†é¸æ“‡è¦ç¯„</h3>
<p><strong>åŸå‰‡ï¼šæ¸¬è©¦é›†å„ªå…ˆ (Test Set Priority)</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">æƒ…å¢ƒ</th>
<th style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é¸æ“‡</th>
<th style="text-align: left;">ç†ç”±</th>
<th style="text-align: center;">éŒ¯èª¤ä»£ç¢¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>æ¨™æº–æƒ…å¢ƒ</strong></td>
<td style="text-align: left;"><strong>æ¸¬è©¦é›† ($D_{test}$)</strong></td>
<td style="text-align: left;">æœªåƒèˆ‡ä»»ä½•æ¨¡å‹è¨“ç·´ï¼Œæœ€èƒ½åæ˜ çœŸå¯¦æ³›åŒ–èª¤å·®</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: left;">æ¸¬è©¦é›†ä¸å¯ç”¨</td>
<td style="text-align: left;">é©—è­‰é›† ($D_{val}$)</td>
<td style="text-align: left;">é›–ç”¨æ–¼æ—©åœï¼Œä½†æœªç”¨æ–¼åƒæ•¸å„ªåŒ–ï¼Œå¯æ¥å—</td>
<td style="text-align: center;">E759 (Info)</td>
</tr>
<tr>
<td style="text-align: left;">æ¨£æœ¬æ•¸ä¸è¶³ (&lt;100)</td>
<td style="text-align: left;">åˆä½µé©—è­‰é›†+æ¸¬è©¦é›†</td>
<td style="text-align: left;">çµ±è¨ˆé¡¯è‘—æ€§è€ƒé‡ï¼Œéœ€æ¨™è¨˜</td>
<td style="text-align: center;">E759 (Warn)</td>
</tr>
<tr>
<td style="text-align: left;">æ™‚é–“åºåˆ—é©—è­‰</td>
<td style="text-align: left;">ä¾æ™‚é–“åˆ‡åˆ†çš„ç¨ç«‹å€æ®µ</td>
<td style="text-align: left;">é¿å…è³‡æ–™æ´©æ¼ï¼Œç¢ºä¿æ™‚é–“ç›¸ä¾æ€§</td>
<td style="text-align: center;">-</td>
</tr>
</tbody>
</table>
<p><strong>å¯¦ä½œè¦ç¯„</strong>ï¼š</p>
<pre><code class="language-python">class GoldenDatasetSelector:
    &quot;&quot;&quot;
    é»ƒé‡‘è³‡æ–™é›†é¸æ“‡å™¨
    æ ¹æ“šè³‡æ–™å¯ç”¨æ€§èˆ‡å“è³ªè‡ªå‹•é¸æ“‡æœ€é©åˆçš„æ¯”è¼ƒåŸºæº–
    &quot;&quot;&quot;

    def select(self, artifacts: Dict[str, MultiModelArtifact]) -&gt; Tuple[pd.DataFrame, str]:
        &quot;&quot;&quot;
        Returns:
            dataset: ç”¨æ–¼æ¯”è¼ƒçš„ç‰¹å¾µçŸ©é™£èˆ‡çœŸå¯¦å€¼
            source_tag: è³‡æ–™ä¾†æºæ¨™è¨˜ (&quot;test&quot;, &quot;val&quot;, &quot;combined&quot;, &quot;insufficient&quot;)
        &quot;&quot;&quot;
        # å„ªå…ˆæª¢æŸ¥ Test Set
        if self._has_sufficient_samples(artifacts, &quot;test&quot;, min_samples=100):
            return self._load_test_set(artifacts), &quot;test&quot;

        # æ¬¡é¸ Validation Set
        elif self._has_sufficient_samples(artifacts, &quot;val&quot;, min_samples=100):
            logger.warning(&quot;E759: ä½¿ç”¨é©—è­‰é›†é€²è¡Œä¸€è‡´æ€§æª¢æŸ¥ï¼Œçµæœå¯èƒ½éåº¦æ¨‚è§€&quot;)
            return self._load_val_set(artifacts), &quot;val&quot;

        # æ¨£æœ¬ä¸è¶³æ™‚åˆä½µï¼ˆéœ€ç¢ºä¿ç„¡é‡ç–Šï¼‰
        elif self._can_combine_safely(artifacts):
            logger.warning(&quot;E759: åˆä½µé©—è­‰é›†èˆ‡æ¸¬è©¦é›†ä»¥ç¢ºä¿çµ±è¨ˆé¡¯è‘—æ€§&quot;)
            return self._load_combined(artifacts), &quot;combined&quot;

        else:
            raise ConsistencyError(&quot;E750&quot;, &quot;æ¨£æœ¬æ•¸ä¸è¶³ï¼Œç„¡æ³•é€²è¡Œå¯é çš„ä¸€è‡´æ€§é©—è­‰&quot;)
</code></pre>
<h3 id="22">2.2 æ¯”è¼ƒç¶­åº¦èˆ‡çµ±è¨ˆæ–¹æ³•è«–</h3>
<p><strong>ä¸‰ç¶­åº¦æ¯”è¼ƒæ¡†æ¶</strong>ï¼š</p>
<h4 id="a-point-wise-absolute-error">ç¶­åº¦ Aï¼šé€ç­†çµ•å°èª¤å·® (Point-wise Absolute Error)</h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šæª¢æ¸¬æ¥µç«¯ç•°å¸¸å€¼ï¼ˆOutliersï¼‰</li>
<li><strong>æŒ‡æ¨™</strong>ï¼š$e_i = |\hat{y}<em>{S,i} - \hat{y}</em>{C_{sum},i}|$</li>
<li><strong>é–¾å€¼</strong>ï¼š$e_i &lt; \tau_{absolute}$ï¼ˆé è¨­ 10 kWï¼Œå¯é…ç½®ï¼‰</li>
<li><strong>è¼¸å‡º</strong>ï¼šç•°å¸¸æ¨£æœ¬æ¨™è¨˜ï¼ˆç”¨æ–¼å¾ŒçºŒæ ¹å› åˆ†æï¼‰</li>
</ul>
<h4 id="b-binned-relative-error-">ç¶­åº¦ Bï¼šåˆ†ç¾¤ç›¸å°èª¤å·® (Binned Relative Error) - <strong>ä¸»è¦æ±ºç­–ä¾æ“š</strong></h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šé¿å…æ¥µç«¯å€¼ä¸»å°æ•´é«”åˆ¤æ–·ï¼Œè€ƒé‡HVACéç·šæ€§ç‰¹æ€§</li>
<li>
<p><strong>åˆ†ç¾¤ç­–ç•¥</strong>ï¼š<br />
  1. <strong>ä¾ç³»çµ±è² è¼‰åˆ†ç¾¤ (By System Load)</strong>ï¼š</p>
<ul>
<li>è¼•è¼‰ (0-30% RT)</li>
<li>ä¸­è¼‰ (30-70% RT) </li>
<li>é‡è¼‰ (70-100% RT)<br />
  2. <strong>ä¾å¤–æ°£æ¿•çƒæº«åº¦åˆ†ç¾¤ (By Wet-bulb Temp)</strong>ï¼š</li>
<li>ä½æº« (&lt;20Â°C)</li>
<li>ä¸­æº« (20-26Â°C)</li>
<li>é«˜æº« (&gt;26Â°C)<br />
  3. <strong>ä¾è¨­å‚™çµ„åˆåˆ†ç¾¤ (By Equipment Combo)</strong>ï¼š</li>
<li>å–®æ©Ÿé‹è¡Œ</li>
<li>é›™æ©Ÿä¸¦è¯</li>
<li>å¤šæ©Ÿ (&gt;2) ä¸¦è¯</li>
</ul>
</li>
<li>
<p><strong>æŒ‡æ¨™</strong>ï¼šå„ç¾¤çµ„çš„ MAPE (Mean Absolute Percentage Error)<br />
  $$MAPE_{bin} = \frac{1}{n_{bin}} \sum_{i \in bin} \frac{|\hat{y}<em>{S,i} - \hat{y}</em>{C_{sum},i}|}{\hat{y}_{S,i}} \times 100\%$$</p>
</li>
<li>
<p><strong>é€šéæ¨™æº–</strong>ï¼š<strong>æ‰€æœ‰ç¾¤çµ„</strong>çš„ $MAPE_{bin} &lt; \tau_{dynamic}$ï¼ˆå‹•æ…‹é–¾å€¼ï¼Œè¦‹ç¬¬3ç¯€ï¼‰</p>
</li>
</ul>
<h4 id="c-overall-statistical-consistency">ç¶­åº¦ Cï¼šæ•´é«”çµ±è¨ˆä¸€è‡´æ€§ (Overall Statistical Consistency)</h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šç¢ºä¿é•·æœŸè¶¨å‹¢èˆ‡çµ±è¨ˆåˆ†ä½ˆä¸€è‡´</li>
<li><strong>æŒ‡æ¨™</strong>ï¼š<br />
  1. <strong>æ•´é«” MAPE</strong>ï¼š$MAPE_{overall} &lt; 5\%$ï¼ˆå‚³çµ±ç¡¬æ€§æ¨™æº–ï¼Œä½œç‚ºå¾Œå‚™æª¢æŸ¥ï¼‰<br />
  2. <strong>ç›¸é—œä¿‚æ•¸</strong>ï¼š$Corr(\hat{y}<em>S, \hat{y}</em>{C_{sum}}) &gt; 0.95$<br />
  3. <strong>å¹³å‡åå·® (Mean Bias)</strong>ï¼š$Bias = \frac{1}{n}\sum(\hat{y}<em>{C</em>{sum}} - \hat{y}_S)$<ul>
<li>ç”¨æ–¼æª¢æ¸¬ç³»çµ±æ€§é«˜ä¼°/ä½ä¼°ï¼ˆè€¦åˆæ•ˆæ‡‰æŒ‡æ¨™ï¼‰</li>
</ul>
</li>
</ul>
<hr />
<h2 id="3">3. å‹•æ…‹å®¹å·®è¨ˆç®—èˆ‡è€¦åˆæ•ˆæ‡‰è£œå„Ÿ</h2>
<h3 id="31-dynamic-tolerance-model">3.1 å‹•æ…‹å®¹å·®æ¨¡å‹ (Dynamic Tolerance Model)</h3>
<p><strong>å‘Šåˆ¥å›ºå®š5%</strong>ï¼šæ¡ç”¨å¤šå› å­èª¿æ•´æ¨¡å‹</p>
<p>$$\tau_{dynamic} = \tau_{base} \cdot \alpha_{load} \cdot \beta_{complexity} \cdot \gamma_{copula} + \delta_{measurement}$$</p>
<p><strong>åƒæ•¸å®šç¾©</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">åƒæ•¸</th>
<th style="text-align: center;">é è¨­å€¼</th>
<th style="text-align: left;">èª¿æ•´é‚è¼¯</th>
<th style="text-align: left;">èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>åŸºç¤å®¹å·® $\tau_{base}$</strong></td>
<td style="text-align: center;">5%</td>
<td style="text-align: left;">ä¾æ¡ˆå ´æ­·å²è³‡æ–™æ ¡æº–</td>
<td style="text-align: left;">å‚³çµ±ç¡¬æ€§é–€æª»ä½œç‚ºåŸºæº–</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è² è¼‰èª¿æ•´å› å­ $\alpha_{load}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">è¼•è¼‰(&lt;30%)æ™‚ 1.5ï¼Œä¸­è¼‰ 1.0ï¼Œé‡è¼‰ 0.8</td>
<td style="text-align: left;">ä½è² è¼‰æ™‚ç›¸å°èª¤å·®æ”¾å¤§</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è¤‡é›œåº¦èª¿æ•´å› å­ $\beta_{complexity}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">å–®æ©Ÿ 0.9ï¼Œé›™æ©Ÿ 1.0ï¼Œä¸‰æ©Ÿä»¥ä¸Š 1.2</td>
<td style="text-align: left;">è¨­å‚™è¶Šå¤šï¼Œè€¦åˆæ•ˆæ‡‰è¶Šå¼·</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è€¦åˆè£œå„Ÿé … $\gamma_{copula}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">ä¾ç®¡è·¯æ‹“æ’²èˆ‡æ­·å²åå·®æ ¡æº–</td>
<td style="text-align: left;">è¦‹3.2ç¯€</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é‡æ¸¬èª¤å·®é … $\delta_{measurement}$</strong></td>
<td style="text-align: center;">0.5%</td>
<td style="text-align: left;">å›ºå®šè£œå„Ÿï¼ˆCTã€PTç²¾åº¦é™åˆ¶ï¼‰</td>
<td style="text-align: left;">ç¡¬é«”é™åˆ¶ç·©è¡</td>
</tr>
</tbody>
</table>
<p><strong>å¯¦ä½œç¯„ä¾‹</strong>ï¼š</p>
<pre><code class="language-python">class DynamicToleranceCalculator:
    &quot;&quot;&quot;
    å‹•æ…‹å®¹å·®è¨ˆç®—å™¨
    æ ¹æ“šé‹è¡Œæ¢ä»¶è¨ˆç®—ç•¶ä¸‹å¯æ¥å—çš„èª¤å·®ç¯„åœ
    &quot;&quot;&quot;

    def calculate(
        self, 
        system_load_percent: float,
        active_equipment_count: int,
        ambient_wb_temp: float,
        site_topology: str = &quot;standard&quot;
    ) -&gt; float:
        &quot;&quot;&quot;
        è¨ˆç®—å‹•æ…‹å®¹å·®é–¾å€¼ (%)
        &quot;&quot;&quot;
        # åŸºç¤å®¹å·®
        tau_base = self.config.base_tolerance  # 5.0

        # è² è¼‰èª¿æ•´ï¼ˆè¼•è¼‰æ”¾å¯¬ï¼Œé‡è¼‰æ”¶ç·Šï¼‰
        if system_load_percent &lt; 0.3:
            alpha = 1.5  # è¼•è¼‰ï¼š5% * 1.5 = 7.5%
        elif system_load_percent &gt; 0.7:
            alpha = 0.8  # é‡è¼‰ï¼š5% * 0.8 = 4.0%
        else:
            alpha = 1.0

        # è¤‡é›œåº¦èª¿æ•´ï¼ˆä¸¦è¯æ©Ÿçµ„æ•¸é‡ï¼‰
        if active_equipment_count == 1:
            beta = 0.9
        elif active_equipment_count == 2:
            beta = 1.0
        else:
            beta = 1.0 + (active_equipment_count - 2) * 0.1  # æ¯å¤šä¸€å°+10%

        # è€¦åˆæ•ˆæ‡‰è£œå„Ÿï¼ˆä¾æ¡ˆå ´æ‹“æ’²ï¼‰
        gamma = self.copula_factors.get(site_topology, 1.0)

        # é‡æ¸¬èª¤å·®ç·©è¡
        delta = 0.5

        tau_dynamic = tau_base * alpha * beta * gamma + delta

        return min(tau_dynamic, 15.0)  # ä¸Šé™15%ï¼Œé˜²æ­¢éåº¦æ”¾å¯¬
</code></pre>
<h3 id="32-hvac-copula-effect">3.2 HVACè€¦åˆæ•ˆæ‡‰ (Copula Effect) è™•ç†</h3>
<p><strong>ç‰©ç†æ©Ÿåˆ¶è­˜åˆ¥</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">è€¦åˆé¡å‹</th>
<th style="text-align: left;">ç‰©ç†æè¿°</th>
<th style="text-align: center;">é æœŸåå·®æ–¹å‘</th>
<th style="text-align: center;">è£œå„Ÿä¿‚æ•¸ $\gamma$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ç®¡è·¯å£“æ (Piping Loss)</strong></td>
<td style="text-align: left;">å¤šæ©Ÿä¸¦è¯æ™‚å…±ç”¨ç®¡è·¯æ‘©æ“¦æå¤±å¢åŠ </td>
<td style="text-align: center;">$C_{sum} &gt; S$ (åŠ ç¸½é«˜ä¼°)</td>
<td style="text-align: center;">1.02 ~ 1.05</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ç†±çŸ­è·¯ (Thermal Short-circuit)</strong></td>
<td style="text-align: left;">å†·å»æ°´å¡”å›æ°´æº«åº¦äº¤äº’å½±éŸ¿</td>
<td style="text-align: center;">$C_{sum} &gt; S$</td>
<td style="text-align: center;">1.01 ~ 1.03</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é›»åŠ›è«§æ³¢ (Harmonics)</strong></td>
<td style="text-align: left;">å¤šè®Šé »å™¨ä¸¦è¯ç”¢ç”Ÿè«§æ³¢æå¤±</td>
<td style="text-align: center;">$C_{sum} &lt; S$ (åŠ ç¸½ä½ä¼°)</td>
<td style="text-align: center;">0.98 ~ 0.99</td>
</tr>
<tr>
<td style="text-align: left;"><strong>æ§åˆ¶å»¶é² (Control Lag)</strong></td>
<td style="text-align: left;">è¨­å‚™é–“æ§åˆ¶ä¸åŒæ­¥å°è‡´æ•ˆç‡æå¤±</td>
<td style="text-align: center;">$C_{sum} &gt; S$</td>
<td style="text-align: center;">1.01 ~ 1.02</td>
</tr>
<tr>
<td style="text-align: left;"><strong>æ¸¬é‡ç–ŠåŠ èª¤å·® (Measurement Stack)</strong></td>
<td style="text-align: left;">å€‹åˆ¥è¨­å‚™é›»è¡¨èª¤å·®ç´¯åŠ </td>
<td style="text-align: center;">ä¸ç¢ºå®š</td>
<td style="text-align: center;">1.01 ~ 1.03</td>
</tr>
</tbody>
</table>
<p><strong>è€¦åˆä¿‚æ•¸è‡ªå‹•æ ¡æº–</strong>ï¼š</p>
<pre><code class="language-python">def calibrate_copula_factor(
    self, 
    historical_data: pd.DataFrame,
    system_predictions: np.ndarray,
    component_predictions: Dict[str, np.ndarray]
) -&gt; Dict[str, float]:
    &quot;&quot;&quot;
    åŸºæ–¼æ­·å²é‹è¡Œè³‡æ–™è‡ªå‹•æ ¡æº–è€¦åˆä¿‚æ•¸
    åŸ·è¡Œæ™‚æ©Ÿï¼šæ¨¡å‹éƒ¨ç½²åˆæœŸï¼ˆç¬¬ä¸€å€‹æœˆé‹è¡Œå¾Œï¼‰

    Returns:
        copula_factors: ä¾è¨­å‚™çµ„åˆèˆ‡è² è¼‰å€é–“çš„è£œå„Ÿä¿‚æ•¸è¡¨
    &quot;&quot;&quot;
    # è¨ˆç®—æ­·å²å¹³å‡åå·®
    component_sum = sum(component_predictions.values())
    historical_bias = np.mean(component_sum - system_predictions)

    # ä¾è² è¼‰å€é–“åˆ†ç¾¤è¨ˆç®—
    for load_bin in ['light', 'medium', 'heavy']:
        mask = self._get_load_mask(historical_data, load_bin)
        bias_bin = np.mean((component_sum - system_predictions)[mask])

        # è½‰æ›ç‚ºè£œå„Ÿä¿‚æ•¸ï¼ˆåå·®&gt;0è¡¨ç¤ºåŠ ç¸½é«˜ä¼°ï¼Œéœ€æ”¾å¯¬å®¹å·®ï¼‰
        if bias_bin &gt; 0:
            gamma = 1.0 + (bias_bin / np.mean(system_predictions[mask]))
        else:
            gamma = 1.0

        self.copula_factors[load_bin] = round(gamma, 3)

    return self.copula_factors
</code></pre>
<hr />
<h2 id="4-component-models">4. éƒ¨åˆ†ç¼ºå¤±Component Modelsè™•ç†é‚è¼¯</h2>
<h3 id="41">4.1 å¯ç”¨æ€§åˆ†ç´šèˆ‡é™ç´šç­–ç•¥</h3>
<p>ç•¶ä¸¦éæ‰€æœ‰Component Modelséƒ½å­˜åœ¨æ™‚ï¼ˆä¾‹å¦‚åƒ…è¨“ç·´äº†chiller_1_kwï¼Œç¼ºå°‘pumpèˆ‡toweræ¨¡å‹ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ç­‰ç´š</th>
<th style="text-align: left;">å¯ç”¨Components</th>
<th style="text-align: left;">è™•ç†ç­–ç•¥</th>
<th style="text-align: center;">ç½®ä¿¡åº¦æ¨™è¨˜</th>
<th style="text-align: left;">ä½¿ç”¨é™åˆ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>L3 (å®Œæ•´)</strong></td>
<td style="text-align: left;">ä¸»æ©Ÿ+æ°´æ³µ+æ°´å¡”+å…¶ä»–</td>
<td style="text-align: left;">æ¨™æº–åŠ ç¸½æ¯”è¼ƒ</td>
<td style="text-align: center;">ğŸ”µ é«˜</td>
<td style="text-align: left;">ç„¡é™åˆ¶</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L2 (éƒ¨åˆ†)</strong></td>
<td style="text-align: left;">åƒ…ä¸»æ©Ÿ (Chillers only)</td>
<td style="text-align: left;">ä¸»æ©ŸåŠ ç¸½ vs System - è¼”åŠ©è¨­å‚™åŸºç·š</td>
<td style="text-align: center;">ğŸŸ¡ ä¸­</td>
<td style="text-align: left;">åƒ…ä¾›è¶¨å‹¢åƒè€ƒï¼Œä¸ä½œç‚ºçµ•å°æ¨™æº–</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L1 (æ¥µé™)</strong></td>
<td style="text-align: left;">åƒ…å–®ä¸€ä¸»æ©Ÿ</td>
<td style="text-align: left;">ç„¡æ³•é€²è¡Œä¸€è‡´æ€§æª¢æŸ¥</td>
<td style="text-align: center;">ğŸ”´ ä½</td>
<td style="text-align: left;">ç¦æ­¢é€²è¡ŒHybridé©—è­‰ï¼Œæ”¹ç”¨å–®ä¸€æ¨¡å‹é©—è­‰</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L0 (ç¼ºå¤±)</strong></td>
<td style="text-align: left;">ç„¡Components</td>
<td style="text-align: left;">è·³éHybridæª¢æŸ¥</td>
<td style="text-align: center;">âšª N/A</td>
<td style="text-align: left;">åƒ…ä½¿ç”¨System Model</td>
</tr>
</tbody>
</table>
<p><strong>éƒ¨åˆ†ç¼ºå¤±æ™‚çš„æ•¸å­¸è™•ç†</strong>ï¼š</p>
<p>ç•¶åƒ…æœ‰ä¸»æ©Ÿæ¨¡å‹å­˜åœ¨æ™‚ï¼ˆL2æƒ…å¢ƒï¼‰ï¼š<br />
$$C_{partial} = \sum_{i \in chillers} \hat{y}<em>{C_i} + \hat{y}</em>{aux,baseline}$$</p>
<p>å…¶ä¸­ $\hat{y}_{aux,baseline}$ ç‚ºè¼”åŠ©è¨­å‚™ï¼ˆæ°´æ³µã€æ°´å¡”ï¼‰çš„<strong>ç‰©ç†ä¼°è¨ˆå€¼</strong>æˆ–<strong>æ­·å²å¹³å‡å€¼</strong>ï¼Œè€Œéæ¨¡å‹é æ¸¬ã€‚</p>
<p><strong>ç½®ä¿¡åº¦åŠ æ¬Š</strong>ï¼š<br />
$$Confidence = \frac{N_{available}}{N_{total}} \times \frac{Energy_{available}}{Energy_{total}}$$</p>
<ul>
<li>$N_{available}$ï¼šå¯ç”¨çš„Component Modelsæ•¸é‡</li>
<li>$Energy_{available}$ï¼šé€™äº›è¨­å‚™åœ¨ç¸½èƒ½è€—ä¸­çš„æ­·å²ä½”æ¯”</li>
</ul>
<h3 id="42-missing-component-imputation">4.2 ç¼ºå¤±è£œå„Ÿæ©Ÿåˆ¶ (Missing Component Imputation)</h3>
<p><strong>ç­–ç•¥é¸æ“‡</strong>ï¼š</p>
<pre><code class="language-python">class MissingComponentHandler:
    &quot;&quot;&quot;
    è™•ç†éƒ¨åˆ†Component Modelsç¼ºå¤±çš„æƒ…æ³
    &quot;&quot;&quot;

    IMPUTATION_STRATEGIES = {
        'physical_model': 'ä½¿ç”¨ç‰©ç†æ¨¡å‹ä¼°ç®—ï¼ˆå¦‚æ³µ affinity lawsï¼‰',
        'historical_mean': 'ä½¿ç”¨æ­·å²åŒæ¢ä»¶ä¸‹çš„å¹³å‡å€¼',
        'ml_imputation': 'ä½¿ç”¨ç¨ç«‹çš„è¼•é‡ç´šMLæ¨¡å‹æ’è£œ',
        'proportional_split': 'ä¾å·²çŸ¥Componentsçš„æ¯”ä¾‹åˆ†é…æ®˜å·®'
    }

    def handle(
        self,
        available_components: Dict[str, np.ndarray],
        missing_components: List[str],
        system_prediction: np.ndarray,
        context: Dict  # é‹è¡Œå·¥æ³
    ) -&gt; Tuple[np.ndarray, float]:
        &quot;&quot;&quot;
        Returns:
            imputed_sum: è£œå„Ÿå¾Œçš„åŠ ç¸½é æ¸¬
            confidence: ç½®ä¿¡åº¦åˆ†æ•¸ (0.0 ~ 1.0)
        &quot;&quot;&quot;
        available_sum = sum(available_components.values())

        if len(missing_components) == 0:
            return available_sum, 1.0

        # è¨ˆç®—å·²çŸ¥éƒ¨åˆ†çš„èƒ½è€—ä½”æ¯”
        energy_ratio = self._get_energy_ratio(available_components.keys())

        if energy_ratio &gt; 0.8:  # å·²çŸ¥éƒ¨åˆ†ä½”æ¯”&gt;80%ï¼Œå¯é€²è¡Œæ®˜å·®åˆ†é…
            # ç­–ç•¥ï¼šProportional Split
            residual = system_prediction - available_sum
            # ä¾æ­·å²æ¯”ä¾‹å°‡æ®˜å·®åˆ†é…çµ¦ç¼ºå¤±è¨­å‚™ï¼ˆç¢ºä¿åŠ ç¸½ç­‰æ–¼Systemï¼‰
            imputed_sum = available_sum + (residual * 0.5)  # ä¿å®ˆä¼°è¨ˆ
            confidence = energy_ratio

        elif len(missing_components) &lt;= 2:
            # ç­–ç•¥ï¼šPhysical Model / Historical Mean
            imputed_missing = self._estimate_by_physics(missing_components, context)
            imputed_sum = available_sum + imputed_missing
            confidence = energy_ratio * 0.8  # é™ç´š

        else:
            # ç¼ºå¤±éå¤šï¼Œç„¡æ³•å¯é ä¼°è¨ˆ
            return None, 0.0
</code></pre>
<hr />
<h2 id="5">5. æ ¸å¿ƒæ¼”ç®—æ³•èˆ‡å¯¦ä½œè¦ç¯„</h2>
<h3 id="51-hybridconsistencychecker">5.1 HybridConsistencyChecker é¡åˆ¥è¨­è¨ˆ</h3>
<pre><code class="language-python">class HybridConsistencyChecker:
    &quot;&quot;&quot;
    Hybrid Modelä¸€è‡´æ€§æª¢æŸ¥å™¨ï¼ˆPRD v1.0 æ ¸å¿ƒå¯¦ä½œï¼‰
    æ•´åˆæ‰€æœ‰é©—è­‰é‚è¼¯èˆ‡å®¹å·®è¨ˆç®—
    &quot;&quot;&quot;

    def __init__(
        self,
        config: ConsistencyConfig,
        annotation_manager: FeatureAnnotationManager
    ):
        self.config = config
        self.tolerance_calc = DynamicToleranceCalculator(config)
        self.missing_handler = MissingComponentHandler()
        self.copula_calibrator = CopulaEffectCalibrator()

        # é©—è­‰çµæœå¿«å–ï¼ˆé¿å…é‡è¤‡è¨ˆç®—ï¼‰
        self._cache = {}

    def validate(
        self,
        system_artifact: MultiModelArtifact,
        component_artifacts: Dict[str, MultiModelArtifact],
        dataset_source: str = &quot;auto&quot;,  # &quot;test&quot;, &quot;val&quot;, &quot;auto&quot;
        context: Optional[Dict] = None
    ) -&gt; ConsistencyReport:
        &quot;&quot;&quot;
        åŸ·è¡Œå®Œæ•´çš„ä¸‰ç¶­åº¦ä¸€è‡´æ€§é©—è­‰

        Args:
            system_artifact: System-Levelæ¨¡å‹ç”¢å‡ºç‰©
            component_artifacts: Component-Levelæ¨¡å‹ç”¢å‡ºç‰©å­—å…¸
            dataset_source: æŒ‡å®šé»ƒé‡‘è³‡æ–™é›†ä¾†æº

        Returns:
            ConsistencyReport: è©³ç´°é©—è­‰å ±å‘Šï¼ˆè¦‹5.2ç¯€ï¼‰
        &quot;&quot;&quot;
        # Step 1: é¸æ“‡é»ƒé‡‘è³‡æ–™é›†
        golden_data, source_tag = self._select_golden_dataset(
            system_artifact, dataset_source
        )

        # Step 2: æª¢æŸ¥Componentå®Œæ•´æ€§
        availability_level, missing = self._assess_component_availability(
            component_artifacts, context
        )

        # Step 3: åŸ·è¡Œé æ¸¬
        y_system = system_artifact.predict(golden_data)
        y_components = {
            name: art.predict(golden_data) 
            for name, art in component_artifacts.items()
        }

        # Step 4: è™•ç†ç¼ºå¤±ï¼ˆè‹¥éœ€è¦ï¼‰
        if availability_level in ['L2', 'L1']:
            y_component_sum, confidence = self.missing_handler.handle(
                y_components, missing, y_system, context
            )
        else:
            y_component_sum = sum(y_components.values())
            confidence = 1.0

        # Step 5: è¨ˆç®—ä¸‰ç¶­åº¦æŒ‡æ¨™
        sample_errors = np.abs(y_system - y_component_sum)
        binned_metrics = self._calculate_binned_metrics(
            y_system, y_component_sum, golden_data
        )
        overall_stats = self._calculate_overall_stats(
            y_system, y_component_sum
        )

        # Step 6: å‹•æ…‹å®¹å·®è©•ä¼°
        tolerances = self._calculate_dynamic_tolerances(golden_data, context)

        # Step 7: ç”Ÿæˆåˆ¤æ±º
        verdict = self._generate_verdict(
            sample_errors, binned_metrics, overall_stats, 
            tolerances, availability_level
        )

        return ConsistencyReport(
            verdict=verdict,
            metrics={
                'sample_level': sample_errors,
                'binned': binned_metrics,
                'overall': overall_stats
            },
            tolerances=tolerances,
            copula_analysis=self._analyze_copula_effects(
                y_system, y_components, golden_data
            ),
            availability_level=availability_level,
            confidence=confidence,
            golden_dataset_source=source_tag
        )

    def _calculate_binned_metrics(
        self, 
        y_system: np.ndarray, 
        y_component_sum: np.ndarray,
        data: pd.DataFrame
    ) -&gt; Dict[str, Dict]:
        &quot;&quot;&quot;
        è¨ˆç®—åˆ†ç¾¤çµ±è¨ˆæŒ‡æ¨™ï¼ˆä¾è² è¼‰ã€å¤–æ°£æº«åº¦ã€è¨­å‚™çµ„åˆï¼‰
        &quot;&quot;&quot;
        bins = {}

        # ä¾ç³»çµ±è² è¼‰åˆ†ç¾¤
        for bin_name, mask in self._get_load_bins(data).items():
            if np.sum(mask) &lt; 10:  # æ¨£æœ¬æ•¸ä¸è¶³è·³é
                continue

            bins[f&quot;load_{bin_name}&quot;] = {
                'mape': np.mean(np.abs(y_system[mask] - y_component_sum[mask]) / y_system[mask]) * 100,
                'mae': np.mean(np.abs(y_system[mask] - y_component_sum[mask])),
                'bias': np.mean(y_component_sum[mask] - y_system[mask]),
                'n_samples': np.sum(mask)
            }

        # ä¾å¤–æ°£æ¿•çƒæº«åº¦åˆ†ç¾¤
        for bin_name, mask in self._get_ambient_bins(data).items():
            if np.sum(mask) &lt; 10:
                continue

            bins[f&quot;ambient_{bin_name}&quot;] = {
                'mape': np.mean(np.abs(y_system[mask] - y_component_sum[mask]) / y_system[mask]) * 100,
                'n_samples': np.sum(mask)
            }

        return bins
</code></pre>
<h3 id="52-consistencyreport">5.2 é©—è­‰å ±å‘Šæ ¼å¼ (ConsistencyReport)</h3>
<pre><code class="language-python">@dataclass
class ConsistencyReport:
    &quot;&quot;&quot;
    Hybridä¸€è‡´æ€§é©—è­‰å ±å‘Šçµæ§‹
    &quot;&quot;&quot;
    verdict: str  # &quot;PASS&quot;, &quot;WARNING&quot;, &quot;FAIL&quot;, &quot;INSUFFICIENT_DATA&quot;
    verdict_code: str  # &quot;E750&quot;, &quot;E751&quot;, etc.

    # ä¸‰ç¶­åº¦æŒ‡æ¨™
    metrics: Dict[str, Any]

    # å®¹å·®è³‡è¨Š
    tolerances: Dict[str, float]  # å„ç¾¤çµ„çš„å‹•æ…‹å®¹å·®é–¾å€¼

    # è€¦åˆæ•ˆæ‡‰åˆ†æ
    copula_analysis: Dict[str, Any]

    # è³‡æ–™å“è³ª
    availability_level: str  # &quot;L3&quot;, &quot;L2&quot;, &quot;L1&quot;, &quot;L0&quot;
    confidence: float  # 0.0 ~ 1.0
    golden_dataset_source: str

    # è¨ºæ–·è³‡è¨Š
    violations: List[Dict]  # é•è¦è©³ç´°è³‡è¨Š
    recommendations: List[str]  # æ”¹å–„å»ºè­°

    def to_dict(self) -&gt; Dict:
        &quot;&quot;&quot;åºåˆ—åŒ–ç‚ºå­—å…¸ï¼ˆä¾›JSONè¼¸å‡ºï¼‰&quot;&quot;&quot;
        return {
            'verdict': self.verdict,
            'verdict_code': self.verdict_code,
            'summary': self._generate_summary(),
            'metrics': self.metrics,
            'tolerance_analysis': {
                'applied_tolerances': self.tolerances,
                'base_tolerance': self.config.base_tolerance
            },
            'copula_effects': self.copula_analysis,
            'data_quality': {
                'availability_level': self.availability_level,
                'confidence': self.confidence,
                'golden_dataset': self.golden_dataset_source
            }
        }

    def _generate_summary(self) -&gt; str:
        &quot;&quot;&quot;ç”Ÿæˆäººé¡å¯è®€çš„æ‘˜è¦&quot;&quot;&quot;
        if self.verdict == &quot;PASS&quot;:
            return f&quot;âœ… Hybridä¸€è‡´æ€§æª¢æŸ¥é€šéï¼ˆä¿¡å¿ƒæ°´æº–ï¼š{self.confidence:.0%}ï¼‰&quot;
        elif self.verdict == &quot;WARNING&quot;:
            return f&quot;âš ï¸ å­˜åœ¨è¼•å¾®åå·®ï¼Œå»ºè­°æª¢è¦–è€¦åˆæ•ˆæ‡‰ï¼ˆä¿¡å¿ƒæ°´æº–ï¼š{self.confidence:.0%}ï¼‰&quot;
        else:
            return f&quot;âŒ ä¸€è‡´æ€§æª¢æŸ¥å¤±æ•—ï¼Œå»ºè­°é‡æ–°è¨“ç·´Component Modelsæˆ–æª¢æŸ¥è³‡æ–™å“è³ª&quot;
</code></pre>
<hr />
<h2 id="6">6. éŒ¯èª¤ä»£ç¢¼èˆ‡è­¦å‘Šä»£ç¢¼å°ç…§è¡¨</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">ä»£ç¢¼</th>
<th style="text-align: center;">é¡åˆ¥</th>
<th style="text-align: left;">åç¨±</th>
<th style="text-align: left;">èªªæ˜</th>
<th style="text-align: left;">è™•ç†å»ºè­°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>C001</strong></td>
<td style="text-align: center;">âœ… Pass</td>
<td style="text-align: left;"><code>FULL_CONSISTENCY</code></td>
<td style="text-align: left;">æ‰€æœ‰ç¶­åº¦å‡é€šéå‹•æ…‹å®¹å·®æª¢æŸ¥</td>
<td style="text-align: left;">ç„¡éœ€è™•ç†</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E758</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>COPULA_EFFECT_DETECTED</code></td>
<td style="text-align: left;">åµæ¸¬åˆ°é¡¯è‘—è€¦åˆæ•ˆæ‡‰ï¼ˆåå·®&gt;3%ï¼‰ï¼Œä½†åœ¨å®¹å·®å…§</td>
<td style="text-align: left;">è¨˜éŒ„ä¸¦ç›£æ§ï¼Œå¿…è¦æ™‚æ ¡æº–è€¦åˆä¿‚æ•¸</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E757</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>LIGHT_LOAD_HIGH_VARIANCE</code></td>
<td style="text-align: left;">è¼•è¼‰å€é–“èª¤å·®è¼ƒé«˜ï¼ˆæ­£å¸¸ç¾è±¡ï¼‰</td>
<td style="text-align: left;">ç¢ºèªç‚ºçµ±è¨ˆè®Šç•°ï¼Œéæ¨¡å‹éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E756</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>PARTIAL_COMPONENTS_L2</code></td>
<td style="text-align: left;">åƒ…ä½¿ç”¨L2ç­‰ç´šï¼ˆéƒ¨åˆ†Componentsï¼‰é©—è­‰</td>
<td style="text-align: left;">è£œå……è¨“ç·´ç¼ºå¤±çš„Component Models</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E751</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>EXCEEDS_DYNAMIC_TOLERANCE</code></td>
<td style="text-align: left;">è¶…éå‹•æ…‹å®¹å·®é–¾å€¼ï¼ˆè‡³å°‘ä¸€å€‹ç¾¤çµ„ï¼‰</td>
<td style="text-align: left;">æª¢æŸ¥ç‰¹å¾µå·¥ç¨‹ä¸€è‡´æ€§æˆ–é‡æ–°è¨“ç·´</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E752</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>SYSTEMATIC_BIAS_DETECTED</code></td>
<td style="text-align: left;">åµæ¸¬åˆ°ç³»çµ±æ€§åå·® (Bias &gt; 5%)</td>
<td style="text-align: left;">æª¢æŸ¥è¨­å‚™ä¾è³´é—œä¿‚æˆ–è³‡æ–™æ¨™è¨»éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E753</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>TREND_MISMATCH</code></td>
<td style="text-align: left;">ç›¸é—œä¿‚æ•¸ &lt; 0.95ï¼Œè¶¨å‹¢ä¸ä¸€è‡´</td>
<td style="text-align: left;">åš´é‡æ¨¡å‹éŒ¯èª¤ï¼Œéœ€æª¢æŸ¥è¨“ç·´è³‡æ–™æ™‚é–“å°é½Š</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E754</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>OUTLIER_VIOLATION</code></td>
<td style="text-align: left;">å­˜åœ¨æ¥µç«¯ç•°å¸¸å€¼ï¼ˆå–®ç­†èª¤å·® &gt; 50 kWï¼‰</td>
<td style="text-align: left;">æª¢æŸ¥è©²æ™‚é–“é»çš„è³‡æ–™å“è³ªæˆ–è¨­å‚™ç•°å¸¸</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E755</strong></td>
<td style="text-align: center;">âŒ Error</td>
<td style="text-align: left;"><code>INSUFFICIENT_COMPONENTS</code></td>
<td style="text-align: left;">L1ç­‰ç´šï¼ˆåƒ…å–®ä¸€Componentï¼‰ï¼Œç„¡æ³•é©—è­‰</td>
<td style="text-align: left;">è‡³å°‘éœ€è¨“ç·´æ‰€æœ‰ä¸»æ©Ÿæ¨¡å‹</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E750</strong></td>
<td style="text-align: center;">âŒ Error</td>
<td style="text-align: left;"><code>GOLDEN_DATASET_UNAVAILABLE</code></td>
<td style="text-align: left;">ç„¡å¯ç”¨çš„æ¸¬è©¦é›†æˆ–é©—è­‰é›†</td>
<td style="text-align: left;">é‡æ–°åŸ·è¡Œè¨“ç·´ç®¡ç·šç”¢ç”Ÿè³‡æ–™åˆ†å‰²</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E759</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>DATASET_QUALITY_WARNING</code></td>
<td style="text-align: left;">ä½¿ç”¨é©—è­‰é›†æˆ–åˆä½µè³‡æ–™é›†ï¼ˆåŸ W801/W802ï¼‰</td>
<td style="text-align: left;">å»ºè­°é‡æ–°è¨“ç·´ä»¥ç¢ºä¿åš´è¬¹æ€§</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7">7. èˆ‡ä¸Šä¸‹æ¸¸æ¨¡çµ„çš„æ•´åˆä»‹é¢</h2>
<h3 id="71-training-pipeline-batchtrainingcoordinator">7.1 èˆ‡Training Pipelineæ•´åˆ (BatchTrainingCoordinator)</h3>
<p>å–ä»£Training v1.2ä¸­ç°¡åŒ–çš„<code>_validate_hybrid_consistency()</code>æ–¹æ³•ï¼š</p>
<pre><code class="language-python"># In BatchTrainingCoordinator (Training v1.2)
def _validate_hybrid_consistency(self, tolerance: float = 0.05):
    &quot;&quot;&quot;
    å¼·åŒ–ç‰ˆHybridä¸€è‡´æ€§æª¢æŸ¥ï¼ˆå‘¼å«HybridConsistencyCheckerï¼‰
    &quot;&quot;&quot;
    from src.modeling.validation.hybrid_consistency import HybridConsistencyChecker

    checker = HybridConsistencyChecker(
        config=ConsistencyConfig(base_tolerance=tolerance),
        annotation_manager=self.annotation_manager
    )

    report = checker.validate(
        system_artifact=self.artifacts['system_total_kw'],
        component_artifacts={
            k: v for k, v in self.artifacts.items() 
            if k != 'system_total_kw'
        },
        dataset_source=&quot;test&quot;,  # å¼·åˆ¶ä½¿ç”¨æ¸¬è©¦é›†
        context={'site_id': self.site_id}
    )

    # æ ¹æ“šå ±å‘Šæ±ºç­–
    if report.verdict == &quot;FAIL&quot;:
        logger.error(f&quot;âŒ Hybridä¸€è‡´æ€§æª¢æŸ¥å¤±æ•—ï¼š{report.verdict_code}&quot;)
        # è§¸ç™¼E903ï¼ˆTraining v1.2å®šç¾©ï¼‰æˆ– E75x (Hybrid Consistency)
        raise HybridConsistencyViolation(report)
    elif report.verdict == &quot;WARNING&quot;:
        logger.warning(f&quot;âš ï¸ Hybridä¸€è‡´æ€§è­¦å‘Šï¼š{report.to_dict()['summary']}&quot;)

    return report
</code></pre>
<h3 id="72-optimization-engine-modelregistry">7.2 èˆ‡Optimization Engineæ•´åˆ (ModelRegistry)</h3>
<p>å–ä»£Optimization v1.1ä¸­ç°¡åŒ–çš„<code>validate_hybrid_consistency()</code>ï¼š</p>
<pre><code class="language-python"># In ModelRegistry (Optimization v1.1)
def validate_hybrid_consistency(
    self, 
    site_id: str,
    config: Dict, 
    ambient: Dict,
    tolerance: float = 0.05
) -&gt; Tuple[bool, Dict]:
    &quot;&quot;&quot;
    å›å‚³ï¼š(æ˜¯å¦é€šé, è©³ç´°å ±å‘Š)
    &quot;&quot;&quot;
    checker = HybridConsistencyChecker(
        config=ConsistencyConfig(base_tolerance=tolerance),
        annotation_manager=self.annotation_manager
    )

    # è¼‰å…¥æ¨¡å‹
    system_art = self.load_from_registry(site_id, &quot;system_total_kw&quot;)
    component_arts = {}
    for i in range(1, 5):  # å‡è¨­æœ€å¤š4å°ä¸»æ©Ÿ
        try:
            component_arts[f&quot;chiller_{i}_kw&quot;] = self.load_from_registry(
                site_id, f&quot;chiller_{i}_kw&quot;
            )
        except:
            continue

    # å»ºç«‹è©•ä¼°è³‡æ–™ï¼ˆå–®é»æˆ–æ‰¹æ¬¡ï¼‰
    eval_data = self._create_evaluation_data(config, ambient)

    report = checker.validate(
        system_artifact=system_art,
        component_artifacts=component_arts,
        dataset_source=&quot;auto&quot;,
        context={'evaluation_mode': 'single_point', 'config': config}
    )

    is_consistent = report.verdict in [&quot;PASS&quot;, &quot;WARNING&quot;]

    return is_consistent, report.to_dict()
</code></pre>
<hr />
<h2 id="8">8. æ¸¬è©¦èˆ‡é©—è­‰è¨ˆç•«</h2>
<h3 id="81">8.1 å–®å…ƒæ¸¬è©¦</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">æ¸¬è©¦ID</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">è¼¸å…¥</th>
<th style="text-align: left;">é æœŸçµæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">HCV-001</td>
<td style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é¸æ“‡</td>
<td style="text-align: left;">æ¸¬è©¦é›†æ¨£æœ¬æ•¸=150</td>
<td style="text-align: left;">é¸æ“‡æ¸¬è©¦é›†ï¼Œç„¡è­¦å‘Š</td>
</tr>
<tr>
<td style="text-align: left;">HCV-002</td>
<td style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é™ç´š</td>
<td style="text-align: left;">æ¸¬è©¦é›†æ¨£æœ¬æ•¸=50ï¼Œé©—è­‰é›†=80</td>
<td style="text-align: left;">é¸æ“‡é©—è­‰é›†ï¼Œè§¸ç™¼W801</td>
</tr>
<tr>
<td style="text-align: left;">HCV-003</td>
<td style="text-align: left;">å‹•æ…‹å®¹å·®è¨ˆç®—</td>
<td style="text-align: left;">è¼•è¼‰(20%)ã€é›™æ©Ÿ</td>
<td style="text-align: left;">å®¹å·®=5%<em>1.5</em>1.0+0.5%=8.0%</td>
</tr>
<tr>
<td style="text-align: left;">HCV-004</td>
<td style="text-align: left;">å‹•æ…‹å®¹å·®è¨ˆç®—</td>
<td style="text-align: left;">é‡è¼‰(80%)ã€ä¸‰æ©Ÿ</td>
<td style="text-align: left;">å®¹å·®=5%<em>0.8</em>1.2+0.5%=5.3%</td>
</tr>
<tr>
<td style="text-align: left;">HCV-005</td>
<td style="text-align: left;">åˆ†ç¾¤MAPEè¨ˆç®—</td>
<td style="text-align: left;">è² è¼‰åˆ†ä½ˆï¼šè¼•è¼‰30ç­†ã€ä¸­è¼‰50ç­†ã€é‡è¼‰20ç­†</td>
<td style="text-align: left;">å›å‚³3å€‹ç¾¤çµ„çš„MAPEï¼Œè¼•è¼‰ç¾¤çµ„å®¹å·®è¼ƒé«˜</td>
</tr>
<tr>
<td style="text-align: left;">HCV-006</td>
<td style="text-align: left;">éƒ¨åˆ†ç¼ºå¤±è™•ç†</td>
<td style="text-align: left;">åƒ…chiller_1_kwå¯ç”¨</td>
<td style="text-align: left;">å›å‚³L2ç­‰ç´šï¼Œä¿¡å¿ƒæ°´æº–ä¾èƒ½è€—ä½”æ¯”èª¿æ•´</td>
</tr>
<tr>
<td style="text-align: left;">HCV-007</td>
<td style="text-align: left;">è€¦åˆä¿‚æ•¸æ ¡æº–</td>
<td style="text-align: left;">æ­·å²åå·®+3%ï¼ˆåŠ ç¸½é«˜ä¼°ï¼‰</td>
<td style="text-align: left;">æ ¡æº–å¾ŒÎ³=1.03</td>
</tr>
<tr>
<td style="text-align: left;">HCV-008</td>
<td style="text-align: left;">ç³»çµ±æ€§åå·®æª¢æ¸¬</td>
<td style="text-align: left;">Bias=+6%</td>
<td style="text-align: left;">å›å‚³E752éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;">HCV-009</td>
<td style="text-align: left;">æ¥µç«¯ç•°å¸¸å€¼æª¢æ¸¬</td>
<td style="text-align: left;">å–®ç­†èª¤å·®=60kW</td>
<td style="text-align: left;">å›å‚³E754éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;">HCV-010</td>
<td style="text-align: left;">å®Œæ•´é€šéæƒ…å¢ƒ</td>
<td style="text-align: left;">æ‰€æœ‰ç¾¤çµ„MAPE&lt;å‹•æ…‹å®¹å·®</td>
<td style="text-align: left;">å›å‚³C001ï¼Œç„¡è­¦å‘Š</td>
</tr>
</tbody>
</table>
<h3 id="82">8.2 æ•´åˆæ¸¬è©¦</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">æ¸¬è©¦ID</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">é©—è­‰ç›®æ¨™</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">INT-HCV-001</td>
<td style="text-align: left;">E2E Trainingæ•´åˆ</td>
<td style="text-align: left;">BatchTrainingCoordinatoræ­£ç¢ºå‘¼å«ä¸¦è™•ç†å ±å‘Š</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-002</td>
<td style="text-align: left;">E2E Optimizationæ•´åˆ</td>
<td style="text-align: left;">ModelRegistryæ­£ç¢ºä½¿ç”¨Checkerä¸¦å›å‚³ç›¸å®¹æ ¼å¼</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-003</td>
<td style="text-align: left;">å¤šæ¡ˆå ´æ‹“æ’²é©é…</td>
<td style="text-align: left;">ä¸åŒç®¡è·¯æ‹“æ’²ï¼ˆä¸²è¯/ä¸¦è¯ï¼‰æ­£ç¢ºæ‡‰ç”¨ä¸åŒè€¦åˆä¿‚æ•¸</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-004</td>
<td style="text-align: left;">å­£ç¯€æ€§è€¦åˆè®ŠåŒ–</td>
<td style="text-align: left;">å¤å­£/å†¬å­£è€¦åˆæ•ˆæ‡‰ä¸åŒï¼Œå‹•æ…‹èª¿æ•´å®¹å·®</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-005</td>
<td style="text-align: left;">æ¥µç«¯å·¥æ³å£“åŠ›æ¸¬è©¦</td>
<td style="text-align: left;">100%è² è¼‰+é«˜å¤–æ°£æº«ï¼Œé©—è­‰å®¹å·®ä¸æ”¶ç·Šè‡³ä¸å¯è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="83">8.3 é©—æ”¶æ¨™æº–</h3>
<ul>
<li>[ ] <strong>é»ƒé‡‘æ¨™æº–</strong>ï¼šé è¨­ä½¿ç”¨æ¸¬è©¦é›†ï¼Œæ¨£æœ¬ä¸è¶³æ™‚è‡ªå‹•é™ç´šä¸¦è§¸ç™¼è­¦å‘Š</li>
<li>[ ] <strong>ä¸‰ç¶­åº¦é©—è­‰</strong>ï¼šåŒæ™‚è¼¸å‡ºæ¨£æœ¬ç´šã€åˆ†ç¾¤ç´šã€æ•´é«”ç´šæŒ‡æ¨™</li>
<li>[ ] <strong>å‹•æ…‹å®¹å·®</strong>ï¼šä¾è² è¼‰å€é–“è‡ªå‹•èª¿æ•´å®¹å·®ï¼ˆè¼•è¼‰7.5%ã€é‡è¼‰4%ï¼‰</li>
<li>[ ] <strong>è€¦åˆè£œå„Ÿ</strong>ï¼šè‡ªå‹•æ ¡æº–ä¸¦æ‡‰ç”¨è€¦åˆä¿‚æ•¸ï¼ˆÎ³=0.98~1.05ï¼‰</li>
<li>[ ] <strong>éƒ¨åˆ†ç¼ºå¤±</strong>ï¼šL2ç­‰ç´šæ™‚æ­£ç¢ºè¨ˆç®—ä¿¡å¿ƒæ°´æº–ä¸¦é™ç´šä½¿ç”¨</li>
<li>[ ] <strong>éŒ¯èª¤åˆ†é¡</strong>ï¼šæ­£ç¢ºå€åˆ†C001(é€šé)ã€E758(è­¦å‘Š)ã€E751(å¤±æ•—)</li>
<li>[ ] <strong>ç‰©ç†æ¨™ç±¤</strong>ï¼šæ‰€æœ‰é•è¦å ±å‘Šé™„å¸¶ç‰©ç†åŸå› æ¨™ç±¤ï¼ˆå£“æã€ç†±çŸ­è·¯ç­‰ï¼‰</li>
<li>[ ] <strong>æ•ˆèƒ½</strong>ï¼šè™•ç†10,000ç­†è³‡æ–™çš„é©—è­‰&lt;2ç§’</li>
<li>[ ] <strong>ç›¸å®¹æ€§</strong>ï¼šèˆ‡Training v1.2èˆ‡Optimization v1.1ç„¡ç¸«æ•´åˆ</li>
</ul>
<hr />
<h2 id="9">9. é™„éŒ„</h2>
<h3 id="appendix-a">Appendix A: è€¦åˆæ•ˆæ‡‰ç†±å€åœ–ç¯„ä¾‹</h3>
<pre><code class="language-python"># è¦–è¦ºåŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å¼·åº¦
copula_heatmap = {
    'chiller_1': {'chiller_2': 0.03, 'pump_1': 0.01, 'tower_1': 0.02},
    'chiller_2': {'chiller_1': 0.03, 'pump_2': 0.01, 'tower_2': 0.02},
    'pump_1': {'chiller_1': 0.01, 'pump_2': 0.005},  # æ°´åŠ›è€¦åˆ
    'tower_1': {'tower_2': 0.04}  # ç†±çŸ­è·¯æ•ˆæ‡‰
}
# æ•¸å€¼ä»£è¡¨é æœŸåå·®ç™¾åˆ†æ¯”ï¼ˆ+è¡¨ç¤ºåŠ ç¸½é«˜ä¼°ï¼‰
</code></pre>
<h3 id="appendix-b-consistency_configyaml">Appendix B: é…ç½®ç¯„ä¾‹ (consistency_config.yaml)</h3>
<pre><code class="language-yaml">schema_version: &quot;1.0&quot;

# åŸºç¤å®¹å·®è¨­å®š
base_tolerance: 5.0  # %
measurement_error_buffer: 0.5  # %

# å‹•æ…‹èª¿æ•´åƒæ•¸
dynamic_adjustment:
  load_factors:
    light: 1.5    # &lt;30%
    medium: 1.0   # 30-70%
    heavy: 0.8    # &gt;70%

  complexity_factors:
    single: 0.9
    dual: 1.0
    multiple: 1.2  # &gt;2 units, +0.1 per additional unit

# è€¦åˆæ•ˆæ‡‰é è¨­å€¼ï¼ˆä¾æ¡ˆå ´é¡å‹ï¼‰
copula_defaults:
  standard_parallel: 1.02
  series_connected: 1.05  # ä¸²è¯ç®¡è·¯å£“æè¼ƒå¤§
  primary_secondary: 1.03  # ä¸€æ¬¡å´äºŒæ¬¡å´ç³»çµ±

# é©—è­‰é€šéæ¨™æº–
pass_criteria:
  max_mape_per_bin: dynamic  # ä½¿ç”¨å‹•æ…‹å®¹å·®
  max_overall_mape: 5.0      # ç¡¬æ€§ä¸Šé™ï¼ˆå¾Œå‚™ï¼‰
  min_correlation: 0.95
  max_systematic_bias: 3.0   # %
  max_single_error: 50.0     # kWï¼Œçµ•å°å€¼

# è³‡æ–™é›†é¸æ“‡åå¥½
dataset_preference:
  priority: [&quot;test&quot;, &quot;val&quot;]
  min_samples_per_bin: 10
  allow_combination: true
</code></pre>
<h3 id="appendix-c-json">Appendix C: å ±å‘Šè¼¸å‡ºç¯„ä¾‹ (JSON)</h3>
<pre><code class="language-json">{
  &quot;verdict&quot;: &quot;WARNING&quot;,
  &quot;verdict_code&quot;: &quot;E758&quot;,
  &quot;summary&quot;: &quot;âš ï¸ å­˜åœ¨è¼•å¾®åå·®ï¼Œå»ºè­°æª¢è¦–è€¦åˆæ•ˆæ‡‰ï¼ˆä¿¡å¿ƒæ°´æº–ï¼š95%ï¼‰&quot;,
  &quot;metrics&quot;: {
    &quot;overall&quot;: {
      &quot;mape&quot;: 3.2,
      &quot;mae&quot;: 12.5,
      &quot;bias&quot;: 2.8,
      &quot;correlation&quot;: 0.98
    },
    &quot;binned&quot;: {
      &quot;load_light&quot;: {&quot;mape&quot;: 6.5, &quot;tolerance&quot;: 7.5, &quot;pass&quot;: true},
      &quot;load_medium&quot;: {&quot;mape&quot;: 2.8, &quot;tolerance&quot;: 5.5, &quot;pass&quot;: true},
      &quot;load_heavy&quot;: {&quot;mape&quot;: 2.1, &quot;tolerance&quot;: 4.5, &quot;pass&quot;: true},
      &quot;ambient_high&quot;: {&quot;mape&quot;: 4.2, &quot;tolerance&quot;: 5.5, &quot;pass&quot;: true}
    }
  },
  &quot;copula_analysis&quot;: {
    &quot;detected_effects&quot;: [&quot;piping_loss&quot;, &quot;thermal_short&quot;],
    &quot;estimated_bias&quot;: 2.8,
    &quot;calibrated_gamma&quot;: 1.03,
    &quot;confidence&quot;: &quot;medium&quot;
  },
  &quot;data_quality&quot;: {
    &quot;availability_level&quot;: &quot;L3&quot;,
    &quot;confidence&quot;: 0.95,
    &quot;golden_dataset&quot;: &quot;test&quot;
  },
  &quot;recommendations&quot;: [
    &quot;è¼•è¼‰å€é–“èª¤å·®è¼ƒé«˜ç‚ºæ­£å¸¸ç¾è±¡ï¼Œå»ºè­°ç›£æ§ä½†ä¸éœ€ä¿®æ­£æ¨¡å‹&quot;,
    &quot;åµæ¸¬åˆ°ç®¡è·¯å£“æè€¦åˆæ•ˆæ‡‰ï¼Œå»ºè­°åœ¨Optimizationéšæ®µåŠ å…¥å£“æè£œå„Ÿä¿‚æ•¸&quot;
  ]
}
</code></pre>
<hr />
<p><strong>é—œéµè¨­è¨ˆç¢ºèª</strong>:<br />
1. <strong>é»ƒé‡‘æ¨™æº–æ˜ç¢ºåŒ–</strong>ï¼šå¼·åˆ¶ä½¿ç”¨æ¸¬è©¦é›†ï¼Œå®šç¾©ä¸‰ç¶­åº¦ï¼ˆæ¨£æœ¬/åˆ†ç¾¤/æ•´é«”ï¼‰æ¯”è¼ƒæ–¹æ³•è«–<br />
2. <strong>å‹•æ…‹å®¹å·®</strong>ï¼šå–ä»£å›ºå®š5%ï¼Œæ¡ç”¨è² è¼‰èˆ‡è¤‡é›œåº¦èª¿æ•´æ¨¡å‹ï¼Œæ›´ç¬¦åˆHVACç‰©ç†ç‰¹æ€§<br />
3. <strong>è€¦åˆæ•ˆæ‡‰è£œå„Ÿ</strong>ï¼šè­˜åˆ¥ä¸¦é‡åŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨ï¼Œé¿å…èª¤åˆ¤æ­£å¸¸ç‰©ç†ç¾è±¡<br />
4. <strong>å„ªé›…é™ç´š</strong>ï¼šå®šç¾©L0-L3ç­‰ç´šï¼Œè™•ç†Component Modelséƒ¨åˆ†ç¼ºå¤±æƒ…å¢ƒ<br />
5. <strong>ç‰©ç†å¯è§£é‡‹æ€§</strong>ï¼šæ‰€æœ‰åå·®æ¨™è¨˜ç‰©ç†åŸå› ï¼ˆå£“æã€ç†±çŸ­è·¯ç­‰ï¼‰ï¼Œæ”¯æ´å·¥ç¨‹æ±ºç­–<br />
6. <strong>ç„¡ç¸«æ•´åˆ</strong>ï¼šå‘å¾Œç›¸å®¹Training v1.2èˆ‡Optimization v1.1çš„æ—¢æœ‰ä»‹é¢<br />
```</p>
</body>
</html>