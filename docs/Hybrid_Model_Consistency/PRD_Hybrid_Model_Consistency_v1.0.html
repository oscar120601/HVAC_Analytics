
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PRD_Hybrid_Model_Consistency_v1.0</title>
    
<style>
    body { 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; 
        line-height: 1.6; 
        max-width: 900px; 
        margin: 0 auto; 
        padding: 40px 20px; 
        color: #24292e; 
        background-color: #ffffff;
    }
    h1, h2, h3, h4, h5, h6 { 
        margin-top: 24px; 
        margin-bottom: 16px; 
        font-weight: 600; 
        color: #24292e;
    }
    h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
    h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
    h3 { font-size: 1.25em; }
    p { margin-top: 0; margin-bottom: 16px; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
    table { 
        display: block; 
        width: 100%; 
        overflow: auto; 
        border-spacing: 0; 
        border-collapse: collapse; 
        margin-bottom: 16px; 
    }
    table th, table td { 
        padding: 6px 13px; 
        border: 1px solid #dfe2e5; 
    }
    table th { 
        font-weight: 600; 
        background-color: #f6f8fa; 
    }
    table tr:nth-child(2n) { 
        background-color: #f6f8fa; 
    }
    code { 
        font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace; 
        background-color: #f6f8fa; 
        padding: 0.2em 0.4em; 
        border-radius: 3px; 
        font-size: 85%; 
    }
    pre { 
        background-color: #f6f8fa; 
        padding: 16px; 
        overflow: auto; 
        border-radius: 3px; 
        line-height: 1.45; 
    }
    pre code { 
        background-color: transparent; 
        padding: 0; 
        border-radius: 0; 
    }
    blockquote { 
        border-left: 0.25em solid #dfe2e5; 
        color: #6a737d; 
        padding: 0 1em; 
        margin: 0 0 16px 0; 
    }
    hr {
        height: 0.25em;
        padding: 0;
        margin: 24px 0;
        background-color: #e1e4e8;
        border: 0;
    }
    .mermaid {
        display: flex;
        justify-content: center;
        margin: 20px 0;
    }
</style>

</head>
<body>
    <h1 id="prd-v10-hybrid-model-consistency-validation-specification">PRD v1.0: Hybrid Model Consistency Validation Specification</h1>
<h1 id="_1">æ··åˆæ¨¡å‹ä¸€è‡´æ€§é©—è­‰è¦ç¯„</h1>
<p><strong>æ–‡ä»¶ç‰ˆæœ¬:</strong> v1.0 (Golden Standard &amp; Copula Effect Handling)<br />
<strong>æ—¥æœŸ:</strong> 2026-02-13<br />
<strong>è² è²¬äºº:</strong> Oscar Chang<br />
<strong>ç›®æ¨™æ¨¡çµ„:</strong> <code>src/modeling/validation/hybrid_consistency.py</code>, <code>src/modeling/validation/consistency_checker.py</code><br />
<strong>ä¸Šæ¸¸å¥‘ç´„:</strong> <code>src/modeling/training_pipeline.py</code> (v1.2+, BatchTrainingCoordinator)<br />
<strong>ä¸‹æ¸¸å¥‘ç´„:</strong> <code>src/optimization/engine.py</code> (v1.1+, ModelRegistry)<br />
<strong>é—œéµç›¸ä¾:</strong> <code>src/modeling/artifacts.py</code> (MultiModelArtifact), <code>src/features/annotation_manager.py</code><br />
<strong>é ä¼°å·¥æ™‚:</strong> 3 ~ 4 å€‹å·¥ç¨‹å¤©</p>
<hr />
<h2 id="1">1. åŸ·è¡Œç¸½ç¶±èˆ‡è¨­è¨ˆå“²å­¸</h2>
<h3 id="11">1.1 æ ¸å¿ƒç›®æ¨™</h3>
<p>å»ºç«‹<strong>æ¨™æº–åŒ–ã€å¯é‡ç¾ã€é ˜åŸŸæ„ŸçŸ¥</strong>çš„Hybrid Modelä¸€è‡´æ€§é©—è­‰æ¡†æ¶ï¼Œè§£æ±ºä»¥ä¸‹é—œéµæ¨¡ç³Šåœ°å¸¶ï¼š</p>
<ol>
<li><strong>é»ƒé‡‘æ¨™æº–å®šç¾© (Golden Standard Definition)</strong>ï¼šæ˜ç¢ºå®šç¾©æ¯”è¼ƒçš„åŸºæº–è³‡æ–™é›†ï¼ˆé©—è­‰é›† vs æ¸¬è©¦é›†ï¼‰ã€æ¯”è¼ƒç¶­åº¦ï¼ˆé€ç­† vs æ•´é«”ï¼‰ã€ä»¥åŠçµ±è¨ˆæ–¹æ³•è«–</li>
<li><strong>å®¹å·®è¨ˆç®—æ¨™æº–åŒ– (Tolerance Calculation Standardization)</strong>ï¼šå»ºç«‹è€ƒæ…®HVACè¨­å‚™è€¦åˆæ•ˆæ‡‰ï¼ˆCopula Effectï¼‰çš„å‹•æ…‹å®¹å·®æ¨¡å‹ï¼Œè€Œéç¡¬æ€§å›ºå®š5%é–€æª»</li>
<li><strong>éƒ¨åˆ†ç¼ºå¤±è™•ç† (Partial Missing Handling)</strong>ï¼šå®šç¾©ç•¶Component Modelsåƒ…éƒ¨åˆ†å­˜åœ¨æ™‚ï¼ˆå¦‚åªæœ‰chiller_1_kwï¼Œç„¡chiller_2_kwï¼‰çš„åŠ ç¸½é‚è¼¯èˆ‡ç½®ä¿¡åº¦è©•ä¼°</li>
<li><strong>è€¦åˆæ•ˆæ‡‰è£œå„Ÿ (Copula Effect Compensation)</strong>ï¼šè­˜åˆ¥ä¸¦é‡åŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å°è‡´çš„ç³»çµ±æ€§åå·®ï¼ˆå¦‚å…±ç”¨ç®¡è·¯å£“åŠ›æå¤±ã€ç†±äº¤äº’ä½œç”¨ï¼‰ï¼Œé¿å…èª¤åˆ¤æ­£å¸¸ç‰©ç†ç¾è±¡ç‚ºæ¨¡å‹éŒ¯èª¤</li>
</ol>
<h3 id="12">1.2 è¨­è¨ˆåŸå‰‡</h3>
<ol>
<li><strong>åˆ†å±¤é©—è­‰ç­–ç•¥ (Hierarchical Validation)</strong>ï¼š</li>
<li><strong>L1ï¼šæ¨£æœ¬ç´šé©—è­‰ (Sample-Level)</strong>ï¼šå–®ç­†è³‡æ–™é»çš„çµ•å°èª¤å·®æª¢æŸ¥ï¼ˆç”¨æ–¼ç•°å¸¸æª¢æ¸¬ï¼‰</li>
<li><strong>L2ï¼šèšåˆç´šé©—è­‰ (Aggregate-Level)</strong>ï¼šåˆ†ç¾¤çµ±è¨ˆï¼ˆä¾è² è¼‰å€é–“ã€å¤–æ°£æ¢ä»¶ã€é‹è¡Œæ¨¡å¼åˆ†ç¾¤ï¼‰</li>
<li>
<p><strong>L3ï¼šè¶¨å‹¢ç´šé©—è­‰ (Trend-Level)</strong>ï¼šæ™‚é–“åºåˆ—ç›¸é—œæ€§èˆ‡æ®˜å·®åˆ†æï¼ˆç¢ºä¿å…©æ¨¡å‹è¶¨å‹¢ä¸€è‡´ï¼‰</p>
</li>
<li>
<p><strong>å‹•æ…‹å®¹å·®é–¾å€¼ (Dynamic Tolerance Threshold)</strong>ï¼š</p>
</li>
<li>åŸºæ–¼<strong>ç³»çµ±è² è¼‰ç‡ (System Load Percentage)</strong> å‹•æ…‹èª¿æ•´å®¹å·®ï¼ˆä½è² è¼‰æ™‚å…è¨±è¼ƒé«˜ç›¸å°èª¤å·®ï¼‰</li>
<li>åŸºæ–¼<strong>è¨­å‚™çµ„åˆè¤‡é›œåº¦ (Equipment Combination Complexity)</strong> èª¿æ•´ï¼ˆå¤šè¨­å‚™ä¸¦è¯æ™‚è€¦åˆæ•ˆæ‡‰å¢å¼·ï¼‰</li>
<li>
<p>å€åˆ†<strong>çµ±è¨ˆèª¤å·® (Statistical Error)</strong> èˆ‡<strong>çµæ§‹æ€§åå·® (Structural Bias)</strong></p>
</li>
<li>
<p><strong>ç‰©ç†å¯è§£é‡‹æ€§ (Physical Interpretability)</strong>ï¼š</p>
</li>
<li>æ‰€æœ‰ä¸€è‡´æ€§é•è¦å¿…é ˆæ¨™è¨˜<strong>ç‰©ç†åŸå› æ¨™ç±¤</strong>ï¼ˆå¦‚"ç®¡è·¯å£“æ"ã€"ç†±çŸ­è·¯"ã€"æ¸¬é‡èª¤å·®"ï¼‰</li>
<li>
<p>æä¾›<strong>è€¦åˆæ•ˆæ‡‰ç†±å€åœ– (Copula Heatmap)</strong> è¦–è¦ºåŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å¼·åº¦</p>
</li>
<li>
<p><strong>å‘å¾Œç›¸å®¹æ€§ (Backward Compatibility)</strong>ï¼š</p>
</li>
<li>èˆ‡Training v1.2çš„<code>BatchTrainingCoordinator._validate_hybrid_consistency()</code>ç„¡ç¸«æ•´åˆ</li>
<li>èˆ‡Optimization v1.1çš„<code>ModelRegistry.validate_hybrid_consistency()</code>ä»‹é¢ä¸€è‡´</li>
<li>æ”¯æ´æ—¢æœ‰çš„5%ç¡¬æ€§é–€æª»ä½œç‚ºä¿å®ˆ fallback é¸é …</li>
</ol>
<h3 id="13">1.3 é—œéµè¡“èªå®šç¾©</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">è¡“èª</th>
<th style="text-align: left;">å®šç¾©</th>
<th style="text-align: left;">æ•¸å­¸è¡¨é”</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>System Model ($S$)</strong></td>
<td style="text-align: left;">é æ¸¬ç³»çµ±ç¸½è€—é›»çš„æ¨¡å‹ï¼ˆé»‘ç›’ï¼‰</td>
<td style="text-align: left;">$\hat{y}_S = f_S(X)$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Component Models ($C_i$)</strong></td>
<td style="text-align: left;">é æ¸¬å€‹åˆ¥è¨­å‚™è€—é›»çš„æ¨¡å‹é›†åˆ</td>
<td style="text-align: left;">$\hat{y}<em C_i="C_i">{C_i} = f</em>(X_i)$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>åŠ ç¸½é æ¸¬ ($C_{sum}$)</strong></td>
<td style="text-align: left;">Component Models çš„ç®—è¡“å’Œ</td>
<td style="text-align: left;">$\hat{y}<em sum="sum">{C</em>$}} = \sum_{i=1}^n \hat{y}_{C_i</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è€¦åˆæå¤± ($\delta_{copula}$)</strong></td>
<td style="text-align: left;">è¨­å‚™é–“äº¤äº’ä½œç”¨å°è‡´çš„ç³»çµ±æ€§åå·®</td>
<td style="text-align: left;">$\delta_{copula} = \mathbb{E}[C_{sum} - S]$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é»ƒé‡‘è³‡æ–™é›† ($D_{golden}$)</strong></td>
<td style="text-align: left;">ç”¨æ–¼æ¯”è¼ƒçš„æ¬Šå¨è³‡æ–™é›†ï¼ˆå®šç¾©è¦‹2.1ç¯€ï¼‰</td>
<td style="text-align: left;">$D_{test}$ æˆ– $D_{val}$</td>
</tr>
<tr>
<td style="text-align: left;"><strong>å‹•æ…‹å®¹å·® ($\tau$)</strong></td>
<td style="text-align: left;">ä¾é‹è¡Œæ¢ä»¶è®ŠåŒ–çš„èª¤å·®ä¸Šé™</td>
<td style="text-align: left;">$\tau = \tau_{base} \cdot \alpha_{load} \cdot \beta_{complexity}$</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-golden-standard-definition">2. é»ƒé‡‘æ¨™æº–å®šç¾© (Golden Standard Definition)</h2>
<h3 id="21">2.1 æ¯”è¼ƒè³‡æ–™é›†é¸æ“‡è¦ç¯„</h3>
<p><strong>åŸå‰‡ï¼šæ¸¬è©¦é›†å„ªå…ˆ (Test Set Priority)</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">æƒ…å¢ƒ</th>
<th style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é¸æ“‡</th>
<th style="text-align: left;">ç†ç”±</th>
<th style="text-align: center;">éŒ¯èª¤ä»£ç¢¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>æ¨™æº–æƒ…å¢ƒ</strong></td>
<td style="text-align: left;"><strong>æ¸¬è©¦é›† ($D_{test}$)</strong></td>
<td style="text-align: left;">æœªåƒèˆ‡ä»»ä½•æ¨¡å‹è¨“ç·´ï¼Œæœ€èƒ½åæ˜ çœŸå¯¦æ³›åŒ–èª¤å·®</td>
<td style="text-align: center;">-</td>
</tr>
<tr>
<td style="text-align: left;">æ¸¬è©¦é›†ä¸å¯ç”¨</td>
<td style="text-align: left;">é©—è­‰é›† ($D_{val}$)</td>
<td style="text-align: left;">é›–ç”¨æ–¼æ—©åœï¼Œä½†æœªç”¨æ–¼åƒæ•¸å„ªåŒ–ï¼Œå¯æ¥å—</td>
<td style="text-align: center;">E759 (Info)</td>
</tr>
<tr>
<td style="text-align: left;">æ¨£æœ¬æ•¸ä¸è¶³ (&lt;100)</td>
<td style="text-align: left;">åˆä½µé©—è­‰é›†+æ¸¬è©¦é›†</td>
<td style="text-align: left;">çµ±è¨ˆé¡¯è‘—æ€§è€ƒé‡ï¼Œéœ€æ¨™è¨˜</td>
<td style="text-align: center;">E759 (Warn)</td>
</tr>
<tr>
<td style="text-align: left;">æ™‚é–“åºåˆ—é©—è­‰</td>
<td style="text-align: left;">ä¾æ™‚é–“åˆ‡åˆ†çš„ç¨ç«‹å€æ®µ</td>
<td style="text-align: left;">é¿å…è³‡æ–™æ´©æ¼ï¼Œç¢ºä¿æ™‚é–“ç›¸ä¾æ€§</td>
<td style="text-align: center;">-</td>
</tr>
</tbody>
</table>
<p><strong>å¯¦ä½œè¦ç¯„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GoldenDatasetSelector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    é»ƒé‡‘è³‡æ–™é›†é¸æ“‡å™¨</span>
<span class="sd">    æ ¹æ“šè³‡æ–™å¯ç”¨æ€§èˆ‡å“è³ªè‡ªå‹•é¸æ“‡æœ€é©åˆçš„æ¯”è¼ƒåŸºæº–</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MultiModelArtifact</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            dataset: ç”¨æ–¼æ¯”è¼ƒçš„ç‰¹å¾µçŸ©é™£èˆ‡çœŸå¯¦å€¼</span>
<span class="sd">            source_tag: è³‡æ–™ä¾†æºæ¨™è¨˜ (&quot;test&quot;, &quot;val&quot;, &quot;combined&quot;, &quot;insufficient&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># å„ªå…ˆæª¢æŸ¥ Test Set</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_sufficient_samples</span><span class="p">(</span><span class="n">artifacts</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_test_set</span><span class="p">(</span><span class="n">artifacts</span><span class="p">),</span> <span class="s2">&quot;test&quot;</span>

        <span class="c1"># æ¬¡é¸ Validation Set</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_sufficient_samples</span><span class="p">(</span><span class="n">artifacts</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;E759: ä½¿ç”¨é©—è­‰é›†é€²è¡Œä¸€è‡´æ€§æª¢æŸ¥ï¼Œçµæœå¯èƒ½éåº¦æ¨‚è§€&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_val_set</span><span class="p">(</span><span class="n">artifacts</span><span class="p">),</span> <span class="s2">&quot;val&quot;</span>

        <span class="c1"># æ¨£æœ¬ä¸è¶³æ™‚åˆä½µï¼ˆéœ€ç¢ºä¿ç„¡é‡ç–Šï¼‰</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_can_combine_safely</span><span class="p">(</span><span class="n">artifacts</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;E759: åˆä½µé©—è­‰é›†èˆ‡æ¸¬è©¦é›†ä»¥ç¢ºä¿çµ±è¨ˆé¡¯è‘—æ€§&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_combined</span><span class="p">(</span><span class="n">artifacts</span><span class="p">),</span> <span class="s2">&quot;combined&quot;</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConsistencyError</span><span class="p">(</span><span class="s2">&quot;E750&quot;</span><span class="p">,</span> <span class="s2">&quot;æ¨£æœ¬æ•¸ä¸è¶³ï¼Œç„¡æ³•é€²è¡Œå¯é çš„ä¸€è‡´æ€§é©—è­‰&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="22">2.2 æ¯”è¼ƒç¶­åº¦èˆ‡çµ±è¨ˆæ–¹æ³•è«–</h3>
<p><strong>ä¸‰ç¶­åº¦æ¯”è¼ƒæ¡†æ¶</strong>ï¼š</p>
<h4 id="a-point-wise-absolute-error">ç¶­åº¦ Aï¼šé€ç­†çµ•å°èª¤å·® (Point-wise Absolute Error)</h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šæª¢æ¸¬æ¥µç«¯ç•°å¸¸å€¼ï¼ˆOutliersï¼‰</li>
<li><strong>æŒ‡æ¨™</strong>ï¼š$e_i = |\hat{y}<em C__sum="C_{sum">{S,i} - \hat{y}</em>|$},i</li>
<li><strong>é–¾å€¼</strong>ï¼š$e_i &lt; \tau_{absolute}$ï¼ˆé è¨­ 10 kWï¼Œå¯é…ç½®ï¼‰</li>
<li><strong>è¼¸å‡º</strong>ï¼šç•°å¸¸æ¨£æœ¬æ¨™è¨˜ï¼ˆç”¨æ–¼å¾ŒçºŒæ ¹å› åˆ†æï¼‰</li>
</ul>
<h4 id="b-binned-relative-error-">ç¶­åº¦ Bï¼šåˆ†ç¾¤ç›¸å°èª¤å·® (Binned Relative Error) - <strong>ä¸»è¦æ±ºç­–ä¾æ“š</strong></h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šé¿å…æ¥µç«¯å€¼ä¸»å°æ•´é«”åˆ¤æ–·ï¼Œè€ƒé‡HVACéç·šæ€§ç‰¹æ€§</li>
<li><strong>åˆ†ç¾¤ç­–ç•¥</strong>ï¼š</li>
<li><strong>ä¾ç³»çµ±è² è¼‰åˆ†ç¾¤ (By System Load)</strong>ï¼š<ul>
<li>è¼•è¼‰ (0-30% RT)</li>
<li>ä¸­è¼‰ (30-70% RT) </li>
<li>é‡è¼‰ (70-100% RT)</li>
</ul>
</li>
<li><strong>ä¾å¤–æ°£æ¿•çƒæº«åº¦åˆ†ç¾¤ (By Wet-bulb Temp)</strong>ï¼š<ul>
<li>ä½æº« (&lt;20Â°C)</li>
<li>ä¸­æº« (20-26Â°C)</li>
<li>é«˜æº« (&gt;26Â°C)</li>
</ul>
</li>
<li>
<p><strong>ä¾è¨­å‚™çµ„åˆåˆ†ç¾¤ (By Equipment Combo)</strong>ï¼š</p>
<ul>
<li>å–®æ©Ÿé‹è¡Œ</li>
<li>é›™æ©Ÿä¸¦è¯</li>
<li>å¤šæ©Ÿ (&gt;2) ä¸¦è¯</li>
</ul>
</li>
<li>
<p><strong>æŒ‡æ¨™</strong>ï¼šå„ç¾¤çµ„çš„ MAPE (Mean Absolute Percentage Error)
  $$MAPE_{bin} = \frac{1}{n_{bin}} \sum_{i \in bin} \frac{|\hat{y}<em C__sum="C_{sum">{S,i} - \hat{y}</em> \times 100\%$$},i}|}{\hat{y}_{S,i}</p>
</li>
<li>
<p><strong>é€šéæ¨™æº–</strong>ï¼š<strong>æ‰€æœ‰ç¾¤çµ„</strong>çš„ $MAPE_{bin} &lt; \tau_{dynamic}$ï¼ˆå‹•æ…‹é–¾å€¼ï¼Œè¦‹ç¬¬3ç¯€ï¼‰</p>
</li>
</ul>
<h4 id="c-overall-statistical-consistency">ç¶­åº¦ Cï¼šæ•´é«”çµ±è¨ˆä¸€è‡´æ€§ (Overall Statistical Consistency)</h4>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šç¢ºä¿é•·æœŸè¶¨å‹¢èˆ‡çµ±è¨ˆåˆ†ä½ˆä¸€è‡´</li>
<li><strong>æŒ‡æ¨™</strong>ï¼š</li>
<li><strong>æ•´é«” MAPE</strong>ï¼š$MAPE_{overall} &lt; 5\%$ï¼ˆå‚³çµ±ç¡¬æ€§æ¨™æº–ï¼Œä½œç‚ºå¾Œå‚™æª¢æŸ¥ï¼‰</li>
<li><strong>ç›¸é—œä¿‚æ•¸</strong>ï¼š$Corr(\hat{y}<em C__sum="C_{sum">S, \hat{y}</em>) &gt; 0.95$}</li>
<li><strong>å¹³å‡åå·® (Mean Bias)</strong>ï¼š$Bias = \frac{1}{n}\sum(\hat{y}<em sum="sum">{C</em>_S)$}} - \hat{y<ul>
<li>ç”¨æ–¼æª¢æ¸¬ç³»çµ±æ€§é«˜ä¼°/ä½ä¼°ï¼ˆè€¦åˆæ•ˆæ‡‰æŒ‡æ¨™ï¼‰</li>
</ul>
</li>
</ul>
<hr />
<h2 id="3">3. å‹•æ…‹å®¹å·®è¨ˆç®—èˆ‡è€¦åˆæ•ˆæ‡‰è£œå„Ÿ</h2>
<h3 id="31-dynamic-tolerance-model">3.1 å‹•æ…‹å®¹å·®æ¨¡å‹ (Dynamic Tolerance Model)</h3>
<p><strong>å‘Šåˆ¥å›ºå®š5%</strong>ï¼šæ¡ç”¨å¤šå› å­èª¿æ•´æ¨¡å‹</p>
<p>$$\tau_{dynamic} = \tau_{base} \cdot \alpha_{load} \cdot \beta_{complexity} \cdot \gamma_{copula} + \delta_{measurement}$$</p>
<p><strong>åƒæ•¸å®šç¾©</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">åƒæ•¸</th>
<th style="text-align: center;">é è¨­å€¼</th>
<th style="text-align: left;">èª¿æ•´é‚è¼¯</th>
<th style="text-align: left;">èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>åŸºç¤å®¹å·® $\tau_{base}$</strong></td>
<td style="text-align: center;">5%</td>
<td style="text-align: left;">ä¾æ¡ˆå ´æ­·å²è³‡æ–™æ ¡æº–</td>
<td style="text-align: left;">å‚³çµ±ç¡¬æ€§é–€æª»ä½œç‚ºåŸºæº–</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è² è¼‰èª¿æ•´å› å­ $\alpha_{load}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">è¼•è¼‰(&lt;30%)æ™‚ 1.5ï¼Œä¸­è¼‰ 1.0ï¼Œé‡è¼‰ 0.8</td>
<td style="text-align: left;">ä½è² è¼‰æ™‚ç›¸å°èª¤å·®æ”¾å¤§</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è¤‡é›œåº¦èª¿æ•´å› å­ $\beta_{complexity}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">å–®æ©Ÿ 0.9ï¼Œé›™æ©Ÿ 1.0ï¼Œä¸‰æ©Ÿä»¥ä¸Š 1.2</td>
<td style="text-align: left;">è¨­å‚™è¶Šå¤šï¼Œè€¦åˆæ•ˆæ‡‰è¶Šå¼·</td>
</tr>
<tr>
<td style="text-align: left;"><strong>è€¦åˆè£œå„Ÿé … $\gamma_{copula}$</strong></td>
<td style="text-align: center;">1.0</td>
<td style="text-align: left;">ä¾ç®¡è·¯æ‹“æ’²èˆ‡æ­·å²åå·®æ ¡æº–</td>
<td style="text-align: left;">è¦‹3.2ç¯€</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é‡æ¸¬èª¤å·®é … $\delta_{measurement}$</strong></td>
<td style="text-align: center;">0.5%</td>
<td style="text-align: left;">å›ºå®šè£œå„Ÿï¼ˆCTã€PTç²¾åº¦é™åˆ¶ï¼‰</td>
<td style="text-align: left;">ç¡¬é«”é™åˆ¶ç·©è¡</td>
</tr>
</tbody>
</table>
<p><strong>å¯¦ä½œç¯„ä¾‹</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DynamicToleranceCalculator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å‹•æ…‹å®¹å·®è¨ˆç®—å™¨</span>
<span class="sd">    æ ¹æ“šé‹è¡Œæ¢ä»¶è¨ˆç®—ç•¶ä¸‹å¯æ¥å—çš„èª¤å·®ç¯„åœ</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">system_load_percent</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">active_equipment_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">ambient_wb_temp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">site_topology</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è¨ˆç®—å‹•æ…‹å®¹å·®é–¾å€¼ (%)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># åŸºç¤å®¹å·®</span>
        <span class="n">tau_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">base_tolerance</span>  <span class="c1"># 5.0</span>

        <span class="c1"># è² è¼‰èª¿æ•´ï¼ˆè¼•è¼‰æ”¾å¯¬ï¼Œé‡è¼‰æ”¶ç·Šï¼‰</span>
        <span class="k">if</span> <span class="n">system_load_percent</span> <span class="o">&lt;</span> <span class="mf">0.3</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.5</span>  <span class="c1"># è¼•è¼‰ï¼š5% * 1.5 = 7.5%</span>
        <span class="k">elif</span> <span class="n">system_load_percent</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.8</span>  <span class="c1"># é‡è¼‰ï¼š5% * 0.8 = 4.0%</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="c1"># è¤‡é›œåº¦èª¿æ•´ï¼ˆä¸¦è¯æ©Ÿçµ„æ•¸é‡ï¼‰</span>
        <span class="k">if</span> <span class="n">active_equipment_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="mf">0.9</span>
        <span class="k">elif</span> <span class="n">active_equipment_count</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="p">(</span><span class="n">active_equipment_count</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span>  <span class="c1"># æ¯å¤šä¸€å°+10%</span>

        <span class="c1"># è€¦åˆæ•ˆæ‡‰è£œå„Ÿï¼ˆä¾æ¡ˆå ´æ‹“æ’²ï¼‰</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copula_factors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">site_topology</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># é‡æ¸¬èª¤å·®ç·©è¡</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="n">tau_dynamic</span> <span class="o">=</span> <span class="n">tau_base</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">gamma</span> <span class="o">+</span> <span class="n">delta</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">tau_dynamic</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">)</span>  <span class="c1"># ä¸Šé™15%ï¼Œé˜²æ­¢éåº¦æ”¾å¯¬</span>
</code></pre></div>

<h3 id="32-hvac-copula-effect">3.2 HVACè€¦åˆæ•ˆæ‡‰ (Copula Effect) è™•ç†</h3>
<p><strong>ç‰©ç†æ©Ÿåˆ¶è­˜åˆ¥</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">è€¦åˆé¡å‹</th>
<th style="text-align: left;">ç‰©ç†æè¿°</th>
<th style="text-align: center;">é æœŸåå·®æ–¹å‘</th>
<th style="text-align: center;">è£œå„Ÿä¿‚æ•¸ $\gamma$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>ç®¡è·¯å£“æ (Piping Loss)</strong></td>
<td style="text-align: left;">å¤šæ©Ÿä¸¦è¯æ™‚å…±ç”¨ç®¡è·¯æ‘©æ“¦æå¤±å¢åŠ </td>
<td style="text-align: center;">$C_{sum} &gt; S$ (åŠ ç¸½é«˜ä¼°)</td>
<td style="text-align: center;">1.02 ~ 1.05</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ç†±çŸ­è·¯ (Thermal Short-circuit)</strong></td>
<td style="text-align: left;">å†·å»æ°´å¡”å›æ°´æº«åº¦äº¤äº’å½±éŸ¿</td>
<td style="text-align: center;">$C_{sum} &gt; S$</td>
<td style="text-align: center;">1.01 ~ 1.03</td>
</tr>
<tr>
<td style="text-align: left;"><strong>é›»åŠ›è«§æ³¢ (Harmonics)</strong></td>
<td style="text-align: left;">å¤šè®Šé »å™¨ä¸¦è¯ç”¢ç”Ÿè«§æ³¢æå¤±</td>
<td style="text-align: center;">$C_{sum} &lt; S$ (åŠ ç¸½ä½ä¼°)</td>
<td style="text-align: center;">0.98 ~ 0.99</td>
</tr>
<tr>
<td style="text-align: left;"><strong>æ§åˆ¶å»¶é² (Control Lag)</strong></td>
<td style="text-align: left;">è¨­å‚™é–“æ§åˆ¶ä¸åŒæ­¥å°è‡´æ•ˆç‡æå¤±</td>
<td style="text-align: center;">$C_{sum} &gt; S$</td>
<td style="text-align: center;">1.01 ~ 1.02</td>
</tr>
<tr>
<td style="text-align: left;"><strong>æ¸¬é‡ç–ŠåŠ èª¤å·® (Measurement Stack)</strong></td>
<td style="text-align: left;">å€‹åˆ¥è¨­å‚™é›»è¡¨èª¤å·®ç´¯åŠ </td>
<td style="text-align: center;">ä¸ç¢ºå®š</td>
<td style="text-align: center;">1.01 ~ 1.03</td>
</tr>
</tbody>
</table>
<p><strong>è€¦åˆä¿‚æ•¸è‡ªå‹•æ ¡æº–</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calibrate_copula_factor</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">historical_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">system_predictions</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">component_predictions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    åŸºæ–¼æ­·å²é‹è¡Œè³‡æ–™è‡ªå‹•æ ¡æº–è€¦åˆä¿‚æ•¸</span>
<span class="sd">    åŸ·è¡Œæ™‚æ©Ÿï¼šæ¨¡å‹éƒ¨ç½²åˆæœŸï¼ˆç¬¬ä¸€å€‹æœˆé‹è¡Œå¾Œï¼‰</span>

<span class="sd">    Returns:</span>
<span class="sd">        copula_factors: ä¾è¨­å‚™çµ„åˆèˆ‡è² è¼‰å€é–“çš„è£œå„Ÿä¿‚æ•¸è¡¨</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># è¨ˆç®—æ­·å²å¹³å‡åå·®</span>
    <span class="n">component_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">component_predictions</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">historical_bias</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">component_sum</span> <span class="o">-</span> <span class="n">system_predictions</span><span class="p">)</span>

    <span class="c1"># ä¾è² è¼‰å€é–“åˆ†ç¾¤è¨ˆç®—</span>
    <span class="k">for</span> <span class="n">load_bin</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">,</span> <span class="s1">&#39;heavy&#39;</span><span class="p">]:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_load_mask</span><span class="p">(</span><span class="n">historical_data</span><span class="p">,</span> <span class="n">load_bin</span><span class="p">)</span>
        <span class="n">bias_bin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="n">component_sum</span> <span class="o">-</span> <span class="n">system_predictions</span><span class="p">)[</span><span class="n">mask</span><span class="p">])</span>

        <span class="c1"># è½‰æ›ç‚ºè£œå„Ÿä¿‚æ•¸ï¼ˆåå·®&gt;0è¡¨ç¤ºåŠ ç¸½é«˜ä¼°ï¼Œéœ€æ”¾å¯¬å®¹å·®ï¼‰</span>
        <span class="k">if</span> <span class="n">bias_bin</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">gamma</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="p">(</span><span class="n">bias_bin</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">system_predictions</span><span class="p">[</span><span class="n">mask</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gamma</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">copula_factors</span><span class="p">[</span><span class="n">load_bin</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">gamma</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copula_factors</span>
</code></pre></div>

<hr />
<h2 id="4-component-models">4. éƒ¨åˆ†ç¼ºå¤±Component Modelsè™•ç†é‚è¼¯</h2>
<h3 id="41">4.1 å¯ç”¨æ€§åˆ†ç´šèˆ‡é™ç´šç­–ç•¥</h3>
<p>ç•¶ä¸¦éæ‰€æœ‰Component Modelséƒ½å­˜åœ¨æ™‚ï¼ˆä¾‹å¦‚åƒ…è¨“ç·´äº†chiller_1_kwï¼Œç¼ºå°‘pumpèˆ‡toweræ¨¡å‹ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ç­‰ç´š</th>
<th style="text-align: left;">å¯ç”¨Components</th>
<th style="text-align: left;">è™•ç†ç­–ç•¥</th>
<th style="text-align: center;">ç½®ä¿¡åº¦æ¨™è¨˜</th>
<th style="text-align: left;">ä½¿ç”¨é™åˆ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>L3 (å®Œæ•´)</strong></td>
<td style="text-align: left;">ä¸»æ©Ÿ+æ°´æ³µ+æ°´å¡”+å…¶ä»–</td>
<td style="text-align: left;">æ¨™æº–åŠ ç¸½æ¯”è¼ƒ</td>
<td style="text-align: center;">ğŸ”µ é«˜</td>
<td style="text-align: left;">ç„¡é™åˆ¶</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L2 (éƒ¨åˆ†)</strong></td>
<td style="text-align: left;">åƒ…ä¸»æ©Ÿ (Chillers only)</td>
<td style="text-align: left;">ä¸»æ©ŸåŠ ç¸½ vs System - è¼”åŠ©è¨­å‚™åŸºç·š</td>
<td style="text-align: center;">ğŸŸ¡ ä¸­</td>
<td style="text-align: left;">åƒ…ä¾›è¶¨å‹¢åƒè€ƒï¼Œä¸ä½œç‚ºçµ•å°æ¨™æº–</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L1 (æ¥µé™)</strong></td>
<td style="text-align: left;">åƒ…å–®ä¸€ä¸»æ©Ÿ</td>
<td style="text-align: left;">ç„¡æ³•é€²è¡Œä¸€è‡´æ€§æª¢æŸ¥</td>
<td style="text-align: center;">ğŸ”´ ä½</td>
<td style="text-align: left;">ç¦æ­¢é€²è¡ŒHybridé©—è­‰ï¼Œæ”¹ç”¨å–®ä¸€æ¨¡å‹é©—è­‰</td>
</tr>
<tr>
<td style="text-align: left;"><strong>L0 (ç¼ºå¤±)</strong></td>
<td style="text-align: left;">ç„¡Components</td>
<td style="text-align: left;">è·³éHybridæª¢æŸ¥</td>
<td style="text-align: center;">âšª N/A</td>
<td style="text-align: left;">åƒ…ä½¿ç”¨System Model</td>
</tr>
</tbody>
</table>
<p><strong>éƒ¨åˆ†ç¼ºå¤±æ™‚çš„æ•¸å­¸è™•ç†</strong>ï¼š</p>
<p>ç•¶åƒ…æœ‰ä¸»æ©Ÿæ¨¡å‹å­˜åœ¨æ™‚ï¼ˆL2æƒ…å¢ƒï¼‰ï¼š
$$C_{partial} = \sum_{i \in chillers} \hat{y}<em aux_baseline="aux,baseline">{C_i} + \hat{y}</em>$$</p>
<p>å…¶ä¸­ $\hat{y}_{aux,baseline}$ ç‚ºè¼”åŠ©è¨­å‚™ï¼ˆæ°´æ³µã€æ°´å¡”ï¼‰çš„<strong>ç‰©ç†ä¼°è¨ˆå€¼</strong>æˆ–<strong>æ­·å²å¹³å‡å€¼</strong>ï¼Œè€Œéæ¨¡å‹é æ¸¬ã€‚</p>
<p><strong>ç½®ä¿¡åº¦åŠ æ¬Š</strong>ï¼š
$$Confidence = \frac{N_{available}}{N_{total}} \times \frac{Energy_{available}}{Energy_{total}}$$</p>
<ul>
<li>$N_{available}$ï¼šå¯ç”¨çš„Component Modelsæ•¸é‡</li>
<li>$Energy_{available}$ï¼šé€™äº›è¨­å‚™åœ¨ç¸½èƒ½è€—ä¸­çš„æ­·å²ä½”æ¯”</li>
</ul>
<h3 id="42-missing-component-imputation">4.2 ç¼ºå¤±è£œå„Ÿæ©Ÿåˆ¶ (Missing Component Imputation)</h3>
<p><strong>ç­–ç•¥é¸æ“‡</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MissingComponentHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    è™•ç†éƒ¨åˆ†Component Modelsç¼ºå¤±çš„æƒ…æ³</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">IMPUTATION_STRATEGIES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;physical_model&#39;</span><span class="p">:</span> <span class="s1">&#39;ä½¿ç”¨ç‰©ç†æ¨¡å‹ä¼°ç®—ï¼ˆå¦‚æ³µ affinity lawsï¼‰&#39;</span><span class="p">,</span>
        <span class="s1">&#39;historical_mean&#39;</span><span class="p">:</span> <span class="s1">&#39;ä½¿ç”¨æ­·å²åŒæ¢ä»¶ä¸‹çš„å¹³å‡å€¼&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ml_imputation&#39;</span><span class="p">:</span> <span class="s1">&#39;ä½¿ç”¨ç¨ç«‹çš„è¼•é‡ç´šMLæ¨¡å‹æ’è£œ&#39;</span><span class="p">,</span>
        <span class="s1">&#39;proportional_split&#39;</span><span class="p">:</span> <span class="s1">&#39;ä¾å·²çŸ¥Componentsçš„æ¯”ä¾‹åˆ†é…æ®˜å·®&#39;</span>
    <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">available_components</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
        <span class="n">missing_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">system_prediction</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Dict</span>  <span class="c1"># é‹è¡Œå·¥æ³</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            imputed_sum: è£œå„Ÿå¾Œçš„åŠ ç¸½é æ¸¬</span>
<span class="sd">            confidence: ç½®ä¿¡åº¦åˆ†æ•¸ (0.0 ~ 1.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">available_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">available_components</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_components</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">available_sum</span><span class="p">,</span> <span class="mf">1.0</span>

        <span class="c1"># è¨ˆç®—å·²çŸ¥éƒ¨åˆ†çš„èƒ½è€—ä½”æ¯”</span>
        <span class="n">energy_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_energy_ratio</span><span class="p">(</span><span class="n">available_components</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">energy_ratio</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>  <span class="c1"># å·²çŸ¥éƒ¨åˆ†ä½”æ¯”&gt;80%ï¼Œå¯é€²è¡Œæ®˜å·®åˆ†é…</span>
            <span class="c1"># ç­–ç•¥ï¼šProportional Split</span>
            <span class="n">residual</span> <span class="o">=</span> <span class="n">system_prediction</span> <span class="o">-</span> <span class="n">available_sum</span>
            <span class="c1"># ä¾æ­·å²æ¯”ä¾‹å°‡æ®˜å·®åˆ†é…çµ¦ç¼ºå¤±è¨­å‚™ï¼ˆç¢ºä¿åŠ ç¸½ç­‰æ–¼Systemï¼‰</span>
            <span class="n">imputed_sum</span> <span class="o">=</span> <span class="n">available_sum</span> <span class="o">+</span> <span class="p">(</span><span class="n">residual</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># ä¿å®ˆä¼°è¨ˆ</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="n">energy_ratio</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_components</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># ç­–ç•¥ï¼šPhysical Model / Historical Mean</span>
            <span class="n">imputed_missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_estimate_by_physics</span><span class="p">(</span><span class="n">missing_components</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
            <span class="n">imputed_sum</span> <span class="o">=</span> <span class="n">available_sum</span> <span class="o">+</span> <span class="n">imputed_missing</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="n">energy_ratio</span> <span class="o">*</span> <span class="mf">0.8</span>  <span class="c1"># é™ç´š</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ç¼ºå¤±éå¤šï¼Œç„¡æ³•å¯é ä¼°è¨ˆ</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">0.0</span>
</code></pre></div>

<hr />
<h2 id="5">5. æ ¸å¿ƒæ¼”ç®—æ³•èˆ‡å¯¦ä½œè¦ç¯„</h2>
<h3 id="51-hybridconsistencychecker">5.1 HybridConsistencyChecker é¡åˆ¥è¨­è¨ˆ</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HybridConsistencyChecker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hybrid Modelä¸€è‡´æ€§æª¢æŸ¥å™¨ï¼ˆPRD v1.0 æ ¸å¿ƒå¯¦ä½œï¼‰</span>
<span class="sd">    æ•´åˆæ‰€æœ‰é©—è­‰é‚è¼¯èˆ‡å®¹å·®è¨ˆç®—</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">ConsistencyConfig</span><span class="p">,</span>
        <span class="n">annotation_manager</span><span class="p">:</span> <span class="n">FeatureAnnotationManager</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tolerance_calc</span> <span class="o">=</span> <span class="n">DynamicToleranceCalculator</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">missing_handler</span> <span class="o">=</span> <span class="n">MissingComponentHandler</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copula_calibrator</span> <span class="o">=</span> <span class="n">CopulaEffectCalibrator</span><span class="p">()</span>

        <span class="c1"># é©—è­‰çµæœå¿«å–ï¼ˆé¿å…é‡è¤‡è¨ˆç®—ï¼‰</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">system_artifact</span><span class="p">:</span> <span class="n">MultiModelArtifact</span><span class="p">,</span>
        <span class="n">component_artifacts</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MultiModelArtifact</span><span class="p">],</span>
        <span class="n">dataset_source</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>  <span class="c1"># &quot;test&quot;, &quot;val&quot;, &quot;auto&quot;</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConsistencyReport</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        åŸ·è¡Œå®Œæ•´çš„ä¸‰ç¶­åº¦ä¸€è‡´æ€§é©—è­‰</span>

<span class="sd">        Args:</span>
<span class="sd">            system_artifact: System-Levelæ¨¡å‹ç”¢å‡ºç‰©</span>
<span class="sd">            component_artifacts: Component-Levelæ¨¡å‹ç”¢å‡ºç‰©å­—å…¸</span>
<span class="sd">            dataset_source: æŒ‡å®šé»ƒé‡‘è³‡æ–™é›†ä¾†æº</span>

<span class="sd">        Returns:</span>
<span class="sd">            ConsistencyReport: è©³ç´°é©—è­‰å ±å‘Šï¼ˆè¦‹5.2ç¯€ï¼‰</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Step 1: é¸æ“‡é»ƒé‡‘è³‡æ–™é›†</span>
        <span class="n">golden_data</span><span class="p">,</span> <span class="n">source_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_golden_dataset</span><span class="p">(</span>
            <span class="n">system_artifact</span><span class="p">,</span> <span class="n">dataset_source</span>
        <span class="p">)</span>

        <span class="c1"># Step 2: æª¢æŸ¥Componentå®Œæ•´æ€§</span>
        <span class="n">availability_level</span><span class="p">,</span> <span class="n">missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_assess_component_availability</span><span class="p">(</span>
            <span class="n">component_artifacts</span><span class="p">,</span> <span class="n">context</span>
        <span class="p">)</span>

        <span class="c1"># Step 3: åŸ·è¡Œé æ¸¬</span>
        <span class="n">y_system</span> <span class="o">=</span> <span class="n">system_artifact</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">golden_data</span><span class="p">)</span>
        <span class="n">y_components</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">name</span><span class="p">:</span> <span class="n">art</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">golden_data</span><span class="p">)</span> 
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">art</span> <span class="ow">in</span> <span class="n">component_artifacts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="c1"># Step 4: è™•ç†ç¼ºå¤±ï¼ˆè‹¥éœ€è¦ï¼‰</span>
        <span class="k">if</span> <span class="n">availability_level</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;L2&#39;</span><span class="p">,</span> <span class="s1">&#39;L1&#39;</span><span class="p">]:</span>
            <span class="n">y_component_sum</span><span class="p">,</span> <span class="n">confidence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">missing_handler</span><span class="o">.</span><span class="n">handle</span><span class="p">(</span>
                <span class="n">y_components</span><span class="p">,</span> <span class="n">missing</span><span class="p">,</span> <span class="n">y_system</span><span class="p">,</span> <span class="n">context</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">y_component_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">y_components</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">confidence</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="c1"># Step 5: è¨ˆç®—ä¸‰ç¶­åº¦æŒ‡æ¨™</span>
        <span class="n">sample_errors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y_system</span> <span class="o">-</span> <span class="n">y_component_sum</span><span class="p">)</span>
        <span class="n">binned_metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_binned_metrics</span><span class="p">(</span>
            <span class="n">y_system</span><span class="p">,</span> <span class="n">y_component_sum</span><span class="p">,</span> <span class="n">golden_data</span>
        <span class="p">)</span>
        <span class="n">overall_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_overall_stats</span><span class="p">(</span>
            <span class="n">y_system</span><span class="p">,</span> <span class="n">y_component_sum</span>
        <span class="p">)</span>

        <span class="c1"># Step 6: å‹•æ…‹å®¹å·®è©•ä¼°</span>
        <span class="n">tolerances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_dynamic_tolerances</span><span class="p">(</span><span class="n">golden_data</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="c1"># Step 7: ç”Ÿæˆåˆ¤æ±º</span>
        <span class="n">verdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_verdict</span><span class="p">(</span>
            <span class="n">sample_errors</span><span class="p">,</span> <span class="n">binned_metrics</span><span class="p">,</span> <span class="n">overall_stats</span><span class="p">,</span> 
            <span class="n">tolerances</span><span class="p">,</span> <span class="n">availability_level</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">ConsistencyReport</span><span class="p">(</span>
            <span class="n">verdict</span><span class="o">=</span><span class="n">verdict</span><span class="p">,</span>
            <span class="n">metrics</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;sample_level&#39;</span><span class="p">:</span> <span class="n">sample_errors</span><span class="p">,</span>
                <span class="s1">&#39;binned&#39;</span><span class="p">:</span> <span class="n">binned_metrics</span><span class="p">,</span>
                <span class="s1">&#39;overall&#39;</span><span class="p">:</span> <span class="n">overall_stats</span>
            <span class="p">},</span>
            <span class="n">tolerances</span><span class="o">=</span><span class="n">tolerances</span><span class="p">,</span>
            <span class="n">copula_analysis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_analyze_copula_effects</span><span class="p">(</span>
                <span class="n">y_system</span><span class="p">,</span> <span class="n">y_components</span><span class="p">,</span> <span class="n">golden_data</span>
            <span class="p">),</span>
            <span class="n">availability_level</span><span class="o">=</span><span class="n">availability_level</span><span class="p">,</span>
            <span class="n">confidence</span><span class="o">=</span><span class="n">confidence</span><span class="p">,</span>
            <span class="n">golden_dataset_source</span><span class="o">=</span><span class="n">source_tag</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_binned_metrics</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">y_system</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> 
        <span class="n">y_component_sum</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è¨ˆç®—åˆ†ç¾¤çµ±è¨ˆæŒ‡æ¨™ï¼ˆä¾è² è¼‰ã€å¤–æ°£æº«åº¦ã€è¨­å‚™çµ„åˆï¼‰</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># ä¾ç³»çµ±è² è¼‰åˆ†ç¾¤</span>
        <span class="k">for</span> <span class="n">bin_name</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_load_bins</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># æ¨£æœ¬æ•¸ä¸è¶³è·³é</span>
                <span class="k">continue</span>

            <span class="n">bins</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;load_</span><span class="si">{</span><span class="n">bin_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;mape&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_component_sum</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span> <span class="o">/</span> <span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s1">&#39;mae&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_component_sum</span><span class="p">[</span><span class="n">mask</span><span class="p">])),</span>
                <span class="s1">&#39;bias&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_component_sum</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">]),</span>
                <span class="s1">&#39;n_samples&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="c1"># ä¾å¤–æ°£æ¿•çƒæº«åº¦åˆ†ç¾¤</span>
        <span class="k">for</span> <span class="n">bin_name</span><span class="p">,</span> <span class="n">mask</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ambient_bins</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">bins</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;ambient_</span><span class="si">{</span><span class="n">bin_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;mape&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">-</span> <span class="n">y_component_sum</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span> <span class="o">/</span> <span class="n">y_system</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
                <span class="s1">&#39;n_samples&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">bins</span>
</code></pre></div>

<h3 id="52-consistencyreport">5.2 é©—è­‰å ±å‘Šæ ¼å¼ (ConsistencyReport)</h3>
<div class="codehilite"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ConsistencyReport</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hybridä¸€è‡´æ€§é©—è­‰å ±å‘Šçµæ§‹</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verdict</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># &quot;PASS&quot;, &quot;WARNING&quot;, &quot;FAIL&quot;, &quot;INSUFFICIENT_DATA&quot;</span>
    <span class="n">verdict_code</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># &quot;E750&quot;, &quot;E751&quot;, etc.</span>

    <span class="c1"># ä¸‰ç¶­åº¦æŒ‡æ¨™</span>
    <span class="n">metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="c1"># å®¹å·®è³‡è¨Š</span>
    <span class="n">tolerances</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>  <span class="c1"># å„ç¾¤çµ„çš„å‹•æ…‹å®¹å·®é–¾å€¼</span>

    <span class="c1"># è€¦åˆæ•ˆæ‡‰åˆ†æ</span>
    <span class="n">copula_analysis</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="c1"># è³‡æ–™å“è³ª</span>
    <span class="n">availability_level</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># &quot;L3&quot;, &quot;L2&quot;, &quot;L1&quot;, &quot;L0&quot;</span>
    <span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># 0.0 ~ 1.0</span>
    <span class="n">golden_dataset_source</span><span class="p">:</span> <span class="nb">str</span>

    <span class="c1"># è¨ºæ–·è³‡è¨Š</span>
    <span class="n">violations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span>  <span class="c1"># é•è¦è©³ç´°è³‡è¨Š</span>
    <span class="n">recommendations</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># æ”¹å–„å»ºè­°</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;åºåˆ—åŒ–ç‚ºå­—å…¸ï¼ˆä¾›JSONè¼¸å‡ºï¼‰&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;verdict&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">verdict</span><span class="p">,</span>
            <span class="s1">&#39;verdict_code&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">verdict_code</span><span class="p">,</span>
            <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_summary</span><span class="p">(),</span>
            <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">,</span>
            <span class="s1">&#39;tolerance_analysis&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;applied_tolerances&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tolerances</span><span class="p">,</span>
                <span class="s1">&#39;base_tolerance&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">base_tolerance</span>
            <span class="p">},</span>
            <span class="s1">&#39;copula_effects&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">copula_analysis</span><span class="p">,</span>
            <span class="s1">&#39;data_quality&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;availability_level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">availability_level</span><span class="p">,</span>
                <span class="s1">&#39;confidence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span>
                <span class="s1">&#39;golden_dataset&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">golden_dataset_source</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç”Ÿæˆäººé¡å¯è®€çš„æ‘˜è¦&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verdict</span> <span class="o">==</span> <span class="s2">&quot;PASS&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;âœ… Hybridä¸€è‡´æ€§æª¢æŸ¥é€šéï¼ˆä¿¡å¿ƒæ°´æº–ï¼š</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2">ï¼‰&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">verdict</span> <span class="o">==</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;âš ï¸ å­˜åœ¨è¼•å¾®åå·®ï¼Œå»ºè­°æª¢è¦–è€¦åˆæ•ˆæ‡‰ï¼ˆä¿¡å¿ƒæ°´æº–ï¼š</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2">ï¼‰&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;âŒ ä¸€è‡´æ€§æª¢æŸ¥å¤±æ•—ï¼Œå»ºè­°é‡æ–°è¨“ç·´Component Modelsæˆ–æª¢æŸ¥è³‡æ–™å“è³ª&quot;</span>
</code></pre></div>

<hr />
<h2 id="6">6. éŒ¯èª¤ä»£ç¢¼èˆ‡è­¦å‘Šä»£ç¢¼å°ç…§è¡¨</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">ä»£ç¢¼</th>
<th style="text-align: center;">é¡åˆ¥</th>
<th style="text-align: left;">åç¨±</th>
<th style="text-align: left;">èªªæ˜</th>
<th style="text-align: left;">è™•ç†å»ºè­°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>C001</strong></td>
<td style="text-align: center;">âœ… Pass</td>
<td style="text-align: left;"><code>FULL_CONSISTENCY</code></td>
<td style="text-align: left;">æ‰€æœ‰ç¶­åº¦å‡é€šéå‹•æ…‹å®¹å·®æª¢æŸ¥</td>
<td style="text-align: left;">ç„¡éœ€è™•ç†</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E758</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>COPULA_EFFECT_DETECTED</code></td>
<td style="text-align: left;">åµæ¸¬åˆ°é¡¯è‘—è€¦åˆæ•ˆæ‡‰ï¼ˆåå·®&gt;3%ï¼‰ï¼Œä½†åœ¨å®¹å·®å…§</td>
<td style="text-align: left;">è¨˜éŒ„ä¸¦ç›£æ§ï¼Œå¿…è¦æ™‚æ ¡æº–è€¦åˆä¿‚æ•¸</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E757</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>LIGHT_LOAD_HIGH_VARIANCE</code></td>
<td style="text-align: left;">è¼•è¼‰å€é–“èª¤å·®è¼ƒé«˜ï¼ˆæ­£å¸¸ç¾è±¡ï¼‰</td>
<td style="text-align: left;">ç¢ºèªç‚ºçµ±è¨ˆè®Šç•°ï¼Œéæ¨¡å‹éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E756</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>PARTIAL_COMPONENTS_L2</code></td>
<td style="text-align: left;">åƒ…ä½¿ç”¨L2ç­‰ç´šï¼ˆéƒ¨åˆ†Componentsï¼‰é©—è­‰</td>
<td style="text-align: left;">è£œå……è¨“ç·´ç¼ºå¤±çš„Component Models</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E751</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>EXCEEDS_DYNAMIC_TOLERANCE</code></td>
<td style="text-align: left;">è¶…éå‹•æ…‹å®¹å·®é–¾å€¼ï¼ˆè‡³å°‘ä¸€å€‹ç¾¤çµ„ï¼‰</td>
<td style="text-align: left;">æª¢æŸ¥ç‰¹å¾µå·¥ç¨‹ä¸€è‡´æ€§æˆ–é‡æ–°è¨“ç·´</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E752</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>SYSTEMATIC_BIAS_DETECTED</code></td>
<td style="text-align: left;">åµæ¸¬åˆ°ç³»çµ±æ€§åå·® (Bias &gt; 5%)</td>
<td style="text-align: left;">æª¢æŸ¥è¨­å‚™ä¾è³´é—œä¿‚æˆ–è³‡æ–™æ¨™è¨»éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E753</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>TREND_MISMATCH</code></td>
<td style="text-align: left;">ç›¸é—œä¿‚æ•¸ &lt; 0.95ï¼Œè¶¨å‹¢ä¸ä¸€è‡´</td>
<td style="text-align: left;">åš´é‡æ¨¡å‹éŒ¯èª¤ï¼Œéœ€æª¢æŸ¥è¨“ç·´è³‡æ–™æ™‚é–“å°é½Š</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E754</strong></td>
<td style="text-align: center;">âŒ Fail</td>
<td style="text-align: left;"><code>OUTLIER_VIOLATION</code></td>
<td style="text-align: left;">å­˜åœ¨æ¥µç«¯ç•°å¸¸å€¼ï¼ˆå–®ç­†èª¤å·® &gt; 50 kWï¼‰</td>
<td style="text-align: left;">æª¢æŸ¥è©²æ™‚é–“é»çš„è³‡æ–™å“è³ªæˆ–è¨­å‚™ç•°å¸¸</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E755</strong></td>
<td style="text-align: center;">âŒ Error</td>
<td style="text-align: left;"><code>INSUFFICIENT_COMPONENTS</code></td>
<td style="text-align: left;">L1ç­‰ç´šï¼ˆåƒ…å–®ä¸€Componentï¼‰ï¼Œç„¡æ³•é©—è­‰</td>
<td style="text-align: left;">è‡³å°‘éœ€è¨“ç·´æ‰€æœ‰ä¸»æ©Ÿæ¨¡å‹</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E750</strong></td>
<td style="text-align: center;">âŒ Error</td>
<td style="text-align: left;"><code>GOLDEN_DATASET_UNAVAILABLE</code></td>
<td style="text-align: left;">ç„¡å¯ç”¨çš„æ¸¬è©¦é›†æˆ–é©—è­‰é›†</td>
<td style="text-align: left;">é‡æ–°åŸ·è¡Œè¨“ç·´ç®¡ç·šç”¢ç”Ÿè³‡æ–™åˆ†å‰²</td>
</tr>
<tr>
<td style="text-align: left;"><strong>E759</strong></td>
<td style="text-align: center;">âš ï¸ Warning</td>
<td style="text-align: left;"><code>DATASET_QUALITY_WARNING</code></td>
<td style="text-align: left;">ä½¿ç”¨é©—è­‰é›†æˆ–åˆä½µè³‡æ–™é›†ï¼ˆåŸ W801/W802ï¼‰</td>
<td style="text-align: left;">å»ºè­°é‡æ–°è¨“ç·´ä»¥ç¢ºä¿åš´è¬¹æ€§</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7">7. èˆ‡ä¸Šä¸‹æ¸¸æ¨¡çµ„çš„æ•´åˆä»‹é¢</h2>
<h3 id="71-training-pipeline-batchtrainingcoordinator">7.1 èˆ‡Training Pipelineæ•´åˆ (BatchTrainingCoordinator)</h3>
<p>å–ä»£Training v1.2ä¸­ç°¡åŒ–çš„<code>_validate_hybrid_consistency()</code>æ–¹æ³•ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># In BatchTrainingCoordinator (Training v1.2)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_validate_hybrid_consistency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å¼·åŒ–ç‰ˆHybridä¸€è‡´æ€§æª¢æŸ¥ï¼ˆå‘¼å«HybridConsistencyCheckerï¼‰</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">src.modeling.validation.hybrid_consistency</span><span class="w"> </span><span class="kn">import</span> <span class="n">HybridConsistencyChecker</span>

    <span class="n">checker</span> <span class="o">=</span> <span class="n">HybridConsistencyChecker</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">ConsistencyConfig</span><span class="p">(</span><span class="n">base_tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">),</span>
        <span class="n">annotation_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_manager</span>
    <span class="p">)</span>

    <span class="n">report</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span>
        <span class="n">system_artifact</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">artifacts</span><span class="p">[</span><span class="s1">&#39;system_total_kw&#39;</span><span class="p">],</span>
        <span class="n">component_artifacts</span><span class="o">=</span><span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artifacts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> 
            <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;system_total_kw&#39;</span>
        <span class="p">},</span>
        <span class="n">dataset_source</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>  <span class="c1"># å¼·åˆ¶ä½¿ç”¨æ¸¬è©¦é›†</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;site_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">site_id</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># æ ¹æ“šå ±å‘Šæ±ºç­–</span>
    <span class="k">if</span> <span class="n">report</span><span class="o">.</span><span class="n">verdict</span> <span class="o">==</span> <span class="s2">&quot;FAIL&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âŒ Hybridä¸€è‡´æ€§æª¢æŸ¥å¤±æ•—ï¼š</span><span class="si">{</span><span class="n">report</span><span class="o">.</span><span class="n">verdict_code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># è§¸ç™¼E903ï¼ˆTraining v1.2å®šç¾©ï¼‰æˆ– E75x (Hybrid Consistency)</span>
        <span class="k">raise</span> <span class="n">HybridConsistencyViolation</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">report</span><span class="o">.</span><span class="n">verdict</span> <span class="o">==</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;âš ï¸ Hybridä¸€è‡´æ€§è­¦å‘Šï¼š</span><span class="si">{</span><span class="n">report</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">&#39;summary&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">report</span>
</code></pre></div>

<h3 id="72-optimization-engine-modelregistry">7.2 èˆ‡Optimization Engineæ•´åˆ (ModelRegistry)</h3>
<p>å–ä»£Optimization v1.1ä¸­ç°¡åŒ–çš„<code>validate_hybrid_consistency()</code>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># In ModelRegistry (Optimization v1.1)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_hybrid_consistency</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> 
    <span class="n">site_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> 
    <span class="n">ambient</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
    <span class="n">tolerance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å›å‚³ï¼š(æ˜¯å¦é€šé, è©³ç´°å ±å‘Š)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="n">HybridConsistencyChecker</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">ConsistencyConfig</span><span class="p">(</span><span class="n">base_tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">),</span>
        <span class="n">annotation_manager</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_manager</span>
    <span class="p">)</span>

    <span class="c1"># è¼‰å…¥æ¨¡å‹</span>
    <span class="n">system_art</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_from_registry</span><span class="p">(</span><span class="n">site_id</span><span class="p">,</span> <span class="s2">&quot;system_total_kw&quot;</span><span class="p">)</span>
    <span class="n">component_arts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>  <span class="c1"># å‡è¨­æœ€å¤š4å°ä¸»æ©Ÿ</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">component_arts</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;chiller_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_kw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_from_registry</span><span class="p">(</span>
                <span class="n">site_id</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;chiller_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_kw&quot;</span>
            <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">continue</span>

    <span class="c1"># å»ºç«‹è©•ä¼°è³‡æ–™ï¼ˆå–®é»æˆ–æ‰¹æ¬¡ï¼‰</span>
    <span class="n">eval_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_evaluation_data</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">ambient</span><span class="p">)</span>

    <span class="n">report</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span>
        <span class="n">system_artifact</span><span class="o">=</span><span class="n">system_art</span><span class="p">,</span>
        <span class="n">component_artifacts</span><span class="o">=</span><span class="n">component_arts</span><span class="p">,</span>
        <span class="n">dataset_source</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;evaluation_mode&#39;</span><span class="p">:</span> <span class="s1">&#39;single_point&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">:</span> <span class="n">config</span><span class="p">}</span>
    <span class="p">)</span>

    <span class="n">is_consistent</span> <span class="o">=</span> <span class="n">report</span><span class="o">.</span><span class="n">verdict</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;PASS&quot;</span><span class="p">,</span> <span class="s2">&quot;WARNING&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">is_consistent</span><span class="p">,</span> <span class="n">report</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</code></pre></div>

<hr />
<h2 id="8">8. æ¸¬è©¦èˆ‡é©—è­‰è¨ˆç•«</h2>
<h3 id="81">8.1 å–®å…ƒæ¸¬è©¦</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">æ¸¬è©¦ID</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">è¼¸å…¥</th>
<th style="text-align: left;">é æœŸçµæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">HCV-001</td>
<td style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é¸æ“‡</td>
<td style="text-align: left;">æ¸¬è©¦é›†æ¨£æœ¬æ•¸=150</td>
<td style="text-align: left;">é¸æ“‡æ¸¬è©¦é›†ï¼Œç„¡è­¦å‘Š</td>
</tr>
<tr>
<td style="text-align: left;">HCV-002</td>
<td style="text-align: left;">é»ƒé‡‘è³‡æ–™é›†é™ç´š</td>
<td style="text-align: left;">æ¸¬è©¦é›†æ¨£æœ¬æ•¸=50ï¼Œé©—è­‰é›†=80</td>
<td style="text-align: left;">é¸æ“‡é©—è­‰é›†ï¼Œè§¸ç™¼W801</td>
</tr>
<tr>
<td style="text-align: left;">HCV-003</td>
<td style="text-align: left;">å‹•æ…‹å®¹å·®è¨ˆç®—</td>
<td style="text-align: left;">è¼•è¼‰(20%)ã€é›™æ©Ÿ</td>
<td style="text-align: left;">å®¹å·®=5%<em>1.5</em>1.0+0.5%=8.0%</td>
</tr>
<tr>
<td style="text-align: left;">HCV-004</td>
<td style="text-align: left;">å‹•æ…‹å®¹å·®è¨ˆç®—</td>
<td style="text-align: left;">é‡è¼‰(80%)ã€ä¸‰æ©Ÿ</td>
<td style="text-align: left;">å®¹å·®=5%<em>0.8</em>1.2+0.5%=5.3%</td>
</tr>
<tr>
<td style="text-align: left;">HCV-005</td>
<td style="text-align: left;">åˆ†ç¾¤MAPEè¨ˆç®—</td>
<td style="text-align: left;">è² è¼‰åˆ†ä½ˆï¼šè¼•è¼‰30ç­†ã€ä¸­è¼‰50ç­†ã€é‡è¼‰20ç­†</td>
<td style="text-align: left;">å›å‚³3å€‹ç¾¤çµ„çš„MAPEï¼Œè¼•è¼‰ç¾¤çµ„å®¹å·®è¼ƒé«˜</td>
</tr>
<tr>
<td style="text-align: left;">HCV-006</td>
<td style="text-align: left;">éƒ¨åˆ†ç¼ºå¤±è™•ç†</td>
<td style="text-align: left;">åƒ…chiller_1_kwå¯ç”¨</td>
<td style="text-align: left;">å›å‚³L2ç­‰ç´šï¼Œä¿¡å¿ƒæ°´æº–ä¾èƒ½è€—ä½”æ¯”èª¿æ•´</td>
</tr>
<tr>
<td style="text-align: left;">HCV-007</td>
<td style="text-align: left;">è€¦åˆä¿‚æ•¸æ ¡æº–</td>
<td style="text-align: left;">æ­·å²åå·®+3%ï¼ˆåŠ ç¸½é«˜ä¼°ï¼‰</td>
<td style="text-align: left;">æ ¡æº–å¾ŒÎ³=1.03</td>
</tr>
<tr>
<td style="text-align: left;">HCV-008</td>
<td style="text-align: left;">ç³»çµ±æ€§åå·®æª¢æ¸¬</td>
<td style="text-align: left;">Bias=+6%</td>
<td style="text-align: left;">å›å‚³E752éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;">HCV-009</td>
<td style="text-align: left;">æ¥µç«¯ç•°å¸¸å€¼æª¢æ¸¬</td>
<td style="text-align: left;">å–®ç­†èª¤å·®=60kW</td>
<td style="text-align: left;">å›å‚³E754éŒ¯èª¤</td>
</tr>
<tr>
<td style="text-align: left;">HCV-010</td>
<td style="text-align: left;">å®Œæ•´é€šéæƒ…å¢ƒ</td>
<td style="text-align: left;">æ‰€æœ‰ç¾¤çµ„MAPE&lt;å‹•æ…‹å®¹å·®</td>
<td style="text-align: left;">å›å‚³C001ï¼Œç„¡è­¦å‘Š</td>
</tr>
</tbody>
</table>
<h3 id="82">8.2 æ•´åˆæ¸¬è©¦</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">æ¸¬è©¦ID</th>
<th style="text-align: left;">æè¿°</th>
<th style="text-align: left;">é©—è­‰ç›®æ¨™</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">INT-HCV-001</td>
<td style="text-align: left;">E2E Trainingæ•´åˆ</td>
<td style="text-align: left;">BatchTrainingCoordinatoræ­£ç¢ºå‘¼å«ä¸¦è™•ç†å ±å‘Š</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-002</td>
<td style="text-align: left;">E2E Optimizationæ•´åˆ</td>
<td style="text-align: left;">ModelRegistryæ­£ç¢ºä½¿ç”¨Checkerä¸¦å›å‚³ç›¸å®¹æ ¼å¼</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-003</td>
<td style="text-align: left;">å¤šæ¡ˆå ´æ‹“æ’²é©é…</td>
<td style="text-align: left;">ä¸åŒç®¡è·¯æ‹“æ’²ï¼ˆä¸²è¯/ä¸¦è¯ï¼‰æ­£ç¢ºæ‡‰ç”¨ä¸åŒè€¦åˆä¿‚æ•¸</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-004</td>
<td style="text-align: left;">å­£ç¯€æ€§è€¦åˆè®ŠåŒ–</td>
<td style="text-align: left;">å¤å­£/å†¬å­£è€¦åˆæ•ˆæ‡‰ä¸åŒï¼Œå‹•æ…‹èª¿æ•´å®¹å·®</td>
</tr>
<tr>
<td style="text-align: left;">INT-HCV-005</td>
<td style="text-align: left;">æ¥µç«¯å·¥æ³å£“åŠ›æ¸¬è©¦</td>
<td style="text-align: left;">100%è² è¼‰+é«˜å¤–æ°£æº«ï¼Œé©—è­‰å®¹å·®ä¸æ”¶ç·Šè‡³ä¸å¯è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="83">8.3 é©—æ”¶æ¨™æº–</h3>
<ul>
<li>[ ] <strong>é»ƒé‡‘æ¨™æº–</strong>ï¼šé è¨­ä½¿ç”¨æ¸¬è©¦é›†ï¼Œæ¨£æœ¬ä¸è¶³æ™‚è‡ªå‹•é™ç´šä¸¦è§¸ç™¼è­¦å‘Š</li>
<li>[ ] <strong>ä¸‰ç¶­åº¦é©—è­‰</strong>ï¼šåŒæ™‚è¼¸å‡ºæ¨£æœ¬ç´šã€åˆ†ç¾¤ç´šã€æ•´é«”ç´šæŒ‡æ¨™</li>
<li>[ ] <strong>å‹•æ…‹å®¹å·®</strong>ï¼šä¾è² è¼‰å€é–“è‡ªå‹•èª¿æ•´å®¹å·®ï¼ˆè¼•è¼‰7.5%ã€é‡è¼‰4%ï¼‰</li>
<li>[ ] <strong>è€¦åˆè£œå„Ÿ</strong>ï¼šè‡ªå‹•æ ¡æº–ä¸¦æ‡‰ç”¨è€¦åˆä¿‚æ•¸ï¼ˆÎ³=0.98~1.05ï¼‰</li>
<li>[ ] <strong>éƒ¨åˆ†ç¼ºå¤±</strong>ï¼šL2ç­‰ç´šæ™‚æ­£ç¢ºè¨ˆç®—ä¿¡å¿ƒæ°´æº–ä¸¦é™ç´šä½¿ç”¨</li>
<li>[ ] <strong>éŒ¯èª¤åˆ†é¡</strong>ï¼šæ­£ç¢ºå€åˆ†C001(é€šé)ã€E758(è­¦å‘Š)ã€E751(å¤±æ•—)</li>
<li>[ ] <strong>ç‰©ç†æ¨™ç±¤</strong>ï¼šæ‰€æœ‰é•è¦å ±å‘Šé™„å¸¶ç‰©ç†åŸå› æ¨™ç±¤ï¼ˆå£“æã€ç†±çŸ­è·¯ç­‰ï¼‰</li>
<li>[ ] <strong>æ•ˆèƒ½</strong>ï¼šè™•ç†10,000ç­†è³‡æ–™çš„é©—è­‰&lt;2ç§’</li>
<li>[ ] <strong>ç›¸å®¹æ€§</strong>ï¼šèˆ‡Training v1.2èˆ‡Optimization v1.1ç„¡ç¸«æ•´åˆ</li>
</ul>
<hr />
<h2 id="9">9. é™„éŒ„</h2>
<h3 id="appendix-a">Appendix A: è€¦åˆæ•ˆæ‡‰ç†±å€åœ–ç¯„ä¾‹</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># è¦–è¦ºåŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨å¼·åº¦</span>
<span class="n">copula_heatmap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;chiller_1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;chiller_2&#39;</span><span class="p">:</span> <span class="mf">0.03</span><span class="p">,</span> <span class="s1">&#39;pump_1&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span> <span class="s1">&#39;tower_1&#39;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">},</span>
    <span class="s1">&#39;chiller_2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;chiller_1&#39;</span><span class="p">:</span> <span class="mf">0.03</span><span class="p">,</span> <span class="s1">&#39;pump_2&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span> <span class="s1">&#39;tower_2&#39;</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">},</span>
    <span class="s1">&#39;pump_1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;chiller_1&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span> <span class="s1">&#39;pump_2&#39;</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">},</span>  <span class="c1"># æ°´åŠ›è€¦åˆ</span>
    <span class="s1">&#39;tower_1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;tower_2&#39;</span><span class="p">:</span> <span class="mf">0.04</span><span class="p">}</span>  <span class="c1"># ç†±çŸ­è·¯æ•ˆæ‡‰</span>
<span class="p">}</span>
<span class="c1"># æ•¸å€¼ä»£è¡¨é æœŸåå·®ç™¾åˆ†æ¯”ï¼ˆ+è¡¨ç¤ºåŠ ç¸½é«˜ä¼°ï¼‰</span>
</code></pre></div>

<h3 id="appendix-b-consistency_configyaml">Appendix B: é…ç½®ç¯„ä¾‹ (consistency_config.yaml)</h3>
<div class="codehilite"><pre><span></span><code><span class="nt">schema_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>

<span class="c1"># åŸºç¤å®¹å·®è¨­å®š</span>
<span class="nt">base_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">  </span><span class="c1"># %</span>
<span class="nt">measurement_error_buffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># %</span>

<span class="c1"># å‹•æ…‹èª¿æ•´åƒæ•¸</span>
<span class="nt">dynamic_adjustment</span><span class="p">:</span>
<span class="w">  </span><span class="nt">load_factors</span><span class="p">:</span>
<span class="w">    </span><span class="nt">light</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5</span><span class="w">    </span><span class="c1"># &lt;30%</span>
<span class="w">    </span><span class="nt">medium</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span><span class="w">   </span><span class="c1"># 30-70%</span>
<span class="w">    </span><span class="nt">heavy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span><span class="w">    </span><span class="c1"># &gt;70%</span>

<span class="w">  </span><span class="nt">complexity_factors</span><span class="p">:</span>
<span class="w">    </span><span class="nt">single</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<span class="w">    </span><span class="nt">dual</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">    </span><span class="nt">multiple</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.2</span><span class="w">  </span><span class="c1"># &gt;2 units, +0.1 per additional unit</span>

<span class="c1"># è€¦åˆæ•ˆæ‡‰é è¨­å€¼ï¼ˆä¾æ¡ˆå ´é¡å‹ï¼‰</span>
<span class="nt">copula_defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">standard_parallel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.02</span>
<span class="w">  </span><span class="nt">series_connected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.05</span><span class="w">  </span><span class="c1"># ä¸²è¯ç®¡è·¯å£“æè¼ƒå¤§</span>
<span class="w">  </span><span class="nt">primary_secondary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.03</span><span class="w">  </span><span class="c1"># ä¸€æ¬¡å´äºŒæ¬¡å´ç³»çµ±</span>

<span class="c1"># é©—è­‰é€šéæ¨™æº–</span>
<span class="nt">pass_criteria</span><span class="p">:</span>
<span class="w">  </span><span class="nt">max_mape_per_bin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dynamic</span><span class="w">  </span><span class="c1"># ä½¿ç”¨å‹•æ…‹å®¹å·®</span>
<span class="w">  </span><span class="nt">max_overall_mape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">      </span><span class="c1"># ç¡¬æ€§ä¸Šé™ï¼ˆå¾Œå‚™ï¼‰</span>
<span class="w">  </span><span class="nt">min_correlation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<span class="w">  </span><span class="nt">max_systematic_bias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span><span class="w">   </span><span class="c1"># %</span>
<span class="w">  </span><span class="nt">max_single_error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50.0</span><span class="w">     </span><span class="c1"># kWï¼Œçµ•å°å€¼</span>

<span class="c1"># è³‡æ–™é›†é¸æ“‡åå¥½</span>
<span class="nt">dataset_preference</span><span class="p">:</span>
<span class="w">  </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;test&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;val&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">min_samples_per_bin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="nt">allow_combination</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>

<h3 id="appendix-c-json">Appendix C: å ±å‘Šè¼¸å‡ºç¯„ä¾‹ (JSON)</h3>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;verdict&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WARNING&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;verdict_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;E758&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;âš ï¸ å­˜åœ¨è¼•å¾®åå·®ï¼Œå»ºè­°æª¢è¦–è€¦åˆæ•ˆæ‡‰ï¼ˆä¿¡å¿ƒæ°´æº–ï¼š95%ï¼‰&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metrics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;overall&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;mape&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;mae&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;bias&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.8</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;correlation&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.98</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;binned&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;load_light&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;mape&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">6.5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;tolerance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">7.5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pass&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;load_medium&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;mape&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.8</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;tolerance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5.5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pass&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;load_heavy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;mape&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;tolerance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">4.5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pass&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;ambient_high&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;mape&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">4.2</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;tolerance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5.5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pass&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;copula_analysis&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;detected_effects&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;piping_loss&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;thermal_short&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;estimated_bias&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.8</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;calibrated_gamma&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.03</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;medium&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;data_quality&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;availability_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;L3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;golden_dataset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;recommendations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;è¼•è¼‰å€é–“èª¤å·®è¼ƒé«˜ç‚ºæ­£å¸¸ç¾è±¡ï¼Œå»ºè­°ç›£æ§ä½†ä¸éœ€ä¿®æ­£æ¨¡å‹&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;åµæ¸¬åˆ°ç®¡è·¯å£“æè€¦åˆæ•ˆæ‡‰ï¼Œå»ºè­°åœ¨Optimizationéšæ®µåŠ å…¥å£“æè£œå„Ÿä¿‚æ•¸&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<p><strong>é—œéµè¨­è¨ˆç¢ºèª</strong>:
1. <strong>é»ƒé‡‘æ¨™æº–æ˜ç¢ºåŒ–</strong>ï¼šå¼·åˆ¶ä½¿ç”¨æ¸¬è©¦é›†ï¼Œå®šç¾©ä¸‰ç¶­åº¦ï¼ˆæ¨£æœ¬/åˆ†ç¾¤/æ•´é«”ï¼‰æ¯”è¼ƒæ–¹æ³•è«–
2. <strong>å‹•æ…‹å®¹å·®</strong>ï¼šå–ä»£å›ºå®š5%ï¼Œæ¡ç”¨è² è¼‰èˆ‡è¤‡é›œåº¦èª¿æ•´æ¨¡å‹ï¼Œæ›´ç¬¦åˆHVACç‰©ç†ç‰¹æ€§
3. <strong>è€¦åˆæ•ˆæ‡‰è£œå„Ÿ</strong>ï¼šè­˜åˆ¥ä¸¦é‡åŒ–è¨­å‚™é–“äº¤äº’ä½œç”¨ï¼Œé¿å…èª¤åˆ¤æ­£å¸¸ç‰©ç†ç¾è±¡
4. <strong>å„ªé›…é™ç´š</strong>ï¼šå®šç¾©L0-L3ç­‰ç´šï¼Œè™•ç†Component Modelséƒ¨åˆ†ç¼ºå¤±æƒ…å¢ƒ
5. <strong>ç‰©ç†å¯è§£é‡‹æ€§</strong>ï¼šæ‰€æœ‰åå·®æ¨™è¨˜ç‰©ç†åŸå› ï¼ˆå£“æã€ç†±çŸ­è·¯ç­‰ï¼‰ï¼Œæ”¯æ´å·¥ç¨‹æ±ºç­–
6. <strong>ç„¡ç¸«æ•´åˆ</strong>ï¼šå‘å¾Œç›¸å®¹Training v1.2èˆ‡Optimization v1.1çš„æ—¢æœ‰ä»‹é¢
```</p>
    
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
</script>

</body>
</html>
