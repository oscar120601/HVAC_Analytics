# HVAC Analytics - ETL Pipeline

HVAC å†°æ°´ç³»çµ±è³‡æ–™è™•ç†èˆ‡åˆ†æå¹³å°

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
HVAC_Analytics/
â”œâ”€â”€ .specify/              # Spec-Kit é…ç½®
â”œâ”€â”€ src/                   # æ ¸å¿ƒæ¨¡çµ„
â”‚   â”œâ”€â”€ etl/              # ETL ç®¡é“
â”‚   â”‚   â”œâ”€â”€ parser.py     # CSV è³‡æ–™è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ cleaner.py    # è³‡æ–™æ¸…æ´—èˆ‡é‡æ¡æ¨£
â”‚   â”‚   â””â”€â”€ batch_processor.py  # æ‰¹æ¬¡è™•ç†å™¨
â”‚   â”œâ”€â”€ models/           # æ©Ÿå™¨å­¸ç¿’æ¨¡å‹
â”‚   â”‚   â””â”€â”€ energy_model.py  # XGBoost èƒ½è€—é æ¸¬æ¨¡å‹
â”‚   â””â”€â”€ optimization/     # å„ªåŒ–æ¼”ç®—æ³•
â”‚       â””â”€â”€ optimizer.py  # SLSQP/DE æœ€ä½³åŒ–å¼•æ“
â”œâ”€â”€ data/                  # è³‡æ–™ç›®éŒ„
â”‚   â”œâ”€â”€ CGMH-TY/          # é•·åºšé†«é™¢å°åŒ—è³‡æ–™
â”‚   â”œâ”€â”€ Farglory_O3/      # é é›„ O3 æ¡ˆå ´è³‡æ–™
â”‚   â””â”€â”€ kmuh/             # å…¶ä»–æ¡ˆå ´è³‡æ–™
â”œâ”€â”€ config/                # é…ç½®æª”æ¡ˆ
â”œâ”€â”€ tests/                 # å–®å…ƒæ¸¬è©¦
â”œâ”€â”€ main.py               # CLI ä¸»ç¨‹å¼
â”œâ”€â”€ etl_ui.py             # Streamlit UI ä¸»ç¨‹å¼
â”œâ”€â”€ requirements.txt      # Python ä¾è³´å¥—ä»¶
â””â”€â”€ start_ui.sh           # å•Ÿå‹•è…³æœ¬

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• Streamlit UI

```bash
# ä½¿ç”¨å•Ÿå‹•è…³æœ¬
bash start_ui.sh

# æˆ–ç›´æ¥åŸ·è¡Œ
python3 -m streamlit run etl_ui.py
```

### 2. ä½¿ç”¨ CLI

```bash
# è§£æåŸå§‹å ±è¡¨
python main.py parse data/raw/report.csv --output_file data/parsed/report.csv

# è¨“ç·´èƒ½è€—é æ¸¬æ¨¡å‹
python main.py train data/clean/report.csv --model_output models/energy_model.pkl

# åŸ·è¡Œæœ€ä½³åŒ–
python main.py optimize models/energy_model.pkl '{"chw_pump_hz": 50, "cw_pump_hz": 50, "tower_fan_hz": 50}' '{"load_rt": 500, "temp_db_out": 85}'

# åŸ·è¡Œå®Œæ•´æµç¨‹
python main.py pipeline data/raw/report.csv
```

### 3. UI åŠŸèƒ½

- **å–®ä¸€æª”æ¡ˆæ¨¡å¼**: ä¸Šå‚³æˆ–é¸æ“‡å–®ä¸€ CSV æª”æ¡ˆé€²è¡Œåˆ†æ
- **æ‰¹æ¬¡è™•ç†æ¨¡å¼**: é¸æ“‡å¤šå€‹æª”æ¡ˆæ‰¹æ¬¡è™•ç†ä¸¦åˆä½µ
- **çµ±è¨ˆè³‡è¨Š**: æ•¸å€¼åˆ†ä½ˆã€å¹³å‡å€¼ã€æ¨™æº–å·®ç­‰çµ±è¨ˆæŒ‡æ¨™
- **æ™‚é–“åºåˆ—**: å¤šè®Šæ•¸æ™‚é–“åºåˆ—è¦–è¦ºåŒ–
- **é—œè¯çŸ©é™£**: è®Šæ•¸ç›¸é—œæ€§ç†±åœ–èˆ‡å¼·åº¦åˆ†æ
- **è³‡æ–™å“è³ª**: ç¼ºå¤±å€¼åˆ†æã€å‡çµåµæ¸¬èˆ‡å“è³ªè©•åˆ†
- **è³‡æ–™åŒ¯å‡º**: CSV / Parquet æ ¼å¼åŒ¯å‡º

## ğŸ“Š è³‡æ–™æ ¼å¼

æ”¯æ´ç‰¹æ®Šæ ¼å¼çš„ HVAC ç›£æ§ CSVï¼š
- Metadata Tag Mapping
- Pre-pivoted Data Format
- è‡ªå‹•åˆä½µè™•ç†é‡è¤‡æ™‚é–“æˆ³

## ğŸ”§ é–‹ç™¼ç‹€æ…‹

### âœ… Phase 1 - ETL åŸºç¤å»ºè¨­ (100% å®Œæˆ)
- [x] è³‡æ–™è§£æå™¨
- [x] è³‡æ–™æ¸…æ´—å™¨
- [x] æ‰¹æ¬¡è™•ç†åŠŸèƒ½
- [x] çµ±ä¸€ UI è¨­è¨ˆ
- [x] æ™‚é–“åºåˆ—è¦–è¦ºåŒ–
- [x] æ¿•çƒæº«åº¦è¨ˆç®—
- [x] å‡çµè³‡æ–™åµæ¸¬
- [x] é—œè¯çŸ©é™£ç†±åœ–
- [x] è³‡æ–™å“è³ªå„€è¡¨æ¿

### âœ… Phase 2 - æ©Ÿå™¨å­¸ç¿’èˆ‡æœ€ä½³åŒ– (100% å®Œæˆ)
- [x] XGBoost èƒ½è€—é æ¸¬æ¨¡å‹ (ç›®æ¨™ MAPE < 5%)
- [x] SLSQP æœ€ä½³åŒ–å¼•æ“
- [x] Differential Evolution å…¨åŸŸå„ªåŒ–
- [x] ç‰©ç†é™åˆ¶é©—è­‰ï¼ˆå£“å·®ã€æº«åº¦ã€é »ç‡ï¼‰
- [x] ç‰¹å¾µé‡è¦æ€§åˆ†æ
- [x] æ¨¡å‹æŒä¹…åŒ–ï¼ˆjoblibï¼‰
- [x] CLI ä»‹é¢
- [x] å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦

### ğŸ”œ Phase 3 - é€²éšåˆ†æèˆ‡éƒ¨ç½²
- [ ] ç†±å¹³è¡¡é©—è­‰æ•´åˆ
- [ ] è¦ªå’ŒåŠ›å®šå¾‹æª¢æŸ¥æ•´åˆ
- [ ] ç•°å¸¸åµæ¸¬æ¨¡å‹ (Isolation Forest)
- [ ] Streamlit æœ€ä½³åŒ–ä»‹é¢
- [ ] å¯¦æ™‚æ¨è–¦ç³»çµ±
- [ ] ç¸¾æ•ˆè¿½è¹¤å„€è¡¨æ¿

## ğŸ“ æŠ€è¡“æ£§

- **è³‡æ–™è™•ç†**: Polars (é«˜æ•ˆèƒ½)
- **UI æ¡†æ¶**: Streamlit
- **è¦–è¦ºåŒ–**: Plotly
- **æ©Ÿå™¨å­¸ç¿’**: scikit-learn, XGBoost
- **æœ€ä½³åŒ–**: SciPy (SLSQP, Differential Evolution)
- **CLI**: Python Fire

